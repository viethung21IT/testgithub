(self.miniJsonp=self.miniJsonp||[]).push([[6348],{27449:function(e,t,r){var n,o,a,i,c,u,s,f,_,p,l,d,E;e.exports=(n=r(58518),o=r(29494),a=r(36808),i=r(67429),c=r(94301),u=r(44900),s=r(59065),f=r(67677),_=r(58397),p=r(47190),l=r(82677),d=r(98282),E=r(34857),function(){"use strict";var e={701:function(e,t,r){r.d(t,{t:function(){return a}});var n=r(661),o=r.n(n),a=o().t.bind(o())},187:function(e){var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}E(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&E(e,"error",t,r)}(e,o,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function s(e,t,r,n){var o,a,i,s;if(c(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),i=a[t]),void 0===i)i=a[t]=r,++e._eventsCount;else if("function"==typeof i?i=a[t]=n?[r,i]:[i,r]:n?i.unshift(r):i.push(r),(o=u(e))>0&&i.length>o&&!i.warned){i.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=i.length,s=f,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=f.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):d(o,o.length)}function l(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function E(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){n.once&&e.removeEventListener(t,o),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var c=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw c.context=i,c}var u=a[e];if(void 0===u)return!1;if("function"==typeof u)n(u,this,t);else{var s=u.length,f=d(u,s);for(r=0;r<s;++r)n(f[r],this,t)}return!0},a.prototype.addListener=function(e,t){return s(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return s(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,_(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,_(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,a,i;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){i=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,i||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},a.prototype.listenerCount=l,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},782:function(e){e.exports=s},830:function(e){e.exports=f},292:function(e){e.exports=_},428:function(e){e.exports=p},661:function(e){e.exports=n},444:function(e){e.exports=c},598:function(e){e.exports=a},383:function(e){e.exports=l},944:function(e){e.exports=E},855:function(e){e.exports=o},672:function(e){e.exports=u},455:function(e){e.exports=d},459:function(e){e.exports=i}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var v={};return function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,r){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,r)}function n(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&t(e,r)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?a(e):t}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e,r,n){return _=f()?Reflect.construct:function(e,r,n){var o=[null];o.push.apply(o,r);var a=new(Function.bind.apply(e,o));return n&&t(a,n.prototype),a},_.apply(null,arguments)}function p(e){var r="function"==typeof Map?new Map:void 0;return p=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,o)}function o(){return _(e,arguments,c(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),t(o,e)},p(e)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}r.r(v),r.d(v,{$tracker:function(){return st},Blacklist:function(){return k},CancelOrderWarning:function(){return M},CustomError:function(){return O},EventBus:function(){return ft},ExceptionName:function(){return Ne},Forbidden:function(){return h},HTTPError:function(){return j},InternalServerError:function(){return G},Limiting:function(){return P},MarkName:function(){return we},NeedCaptchaVerify:function(){return H},NotFound:function(){return C},ReportComponent:function(){return Te},ReportPoint:function(){return Ue},TemporyError:function(){return D},Unauthoried:function(){return N},UnprocessableEntity:function(){return L},UntrustedNetwork:function(){return I},UnverifiedPhoneNumber:function(){return x},Webview:function(){return w},affiliateSchema:function(){return Rt},agentConversationSchema:function(){return Ct},clearApiCache:function(){return oe},collectAsyncTask:function(){return qe},collectComponentTask:function(){return Ye},collectConversationLoadTask:function(){return Ke},collectLoadTask:function(){return We},configTrackerUser:function(){return ct},contactsSchema:function(){return Lt},conversationSchema:function(){return Ot},exceptionTag:function(){return Ce},fetch:function(){return ot},getReportManager:function(){return Pe},getRouterPath:function(){return pt},getTranslation:function(){return Bt},history:function(){return _t},initMDAPSdk:function(){return Xe},isError:function(){return B},isInServiceDownDuration:function(){return ue},mdapConfig:function(){return He},messageSchema:function(){return mt},messageShortcutsSchema:function(){return Tt},normalize:function(){return Dt},offerSchema:function(){return gt},orderSchema:function(){return yt},productSchema:function(){return St},rateCardsSchema:function(){return Nt},reportApiTime:function(){return $e},shopSchema:function(){return wt},shopService:function(){return Z},stickerSchema:function(){return At},userSchema:function(){return bt},vouchersSchema:function(){return Pt}});var d=function(t){n(o,t);var r=l(o);function o(t,n,a){var i;return e(this,o),(i=r.call(this,t)).name=i.constructor.name,i.errors=n,i.data=a,i}return o}(p(Error));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}var h=function(t){n(o,t);var r=E(o);function o(t,n,a){var i;return e(this,o),(i=r.call(this,t,n,a)).name=i.constructor.name,i}return s(o,[{key:"handler",value:function(){}}]),o}(d),b=r(701).t;function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}var m=["unauthorized_for_shop","target_subaccount_unauthorized_for_shop","target_group_unauthorized_for_shop","conversation_not_belong_to_you","conversation_not_dispatch","cannot_move_conversation_to_yourself","target_subaccount_not_online","subaccount_conversation_not_found","conversation_closed"],O=function(t){n(o,t);var r=R(o);function o(t,n,i){var c;return e(this,o),(c=r.call(this,t,n,i)).name=c.constructor.name,c.handler=c.handler.bind(a(c)),c}return s(o,[{key:"handler",value:function(){var e="";if(m.includes(this.errors))e="forward.error.".concat(this.errors);else switch(this.errors){case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title";break;case"too_many_requests_for_unique_fields":e="feedback_modal.too_many_requests_for_unique_fields";break;default:e="common.server_error.warning_tips"}return{show:!0,type:"fail",message:b(e)}}}]),o}(d),y=r(855),S=r(701).t;function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}var A={rating_card_expired:"conversation_detail.message_list.csat_expired",have_submited_csat:"conversation_detail.message_list.csat_have_submited",no_organic_within_24hr:"conversation_detail.message_list.csat_no_organic_within_24hr",send_rating_card_too_frequently:"conversation_detail.message_list.csat_send_rating_card_too_frequently",buyer_receiver_too_many_rating_card:"conversation_detail.message_list.csat_buyer_receiver_too_many_rating_card",buyer_active_feedback_off:"conversation_detail.message_list.csat_buyer_active_feedback_off",not_chat_with_agent:"conversation_detail.message_list.csat_not_chat_with_agent",have_received_rating_card_today:"conversation_detail.message_list.csat_have_received_rating_card_today",can_not_rate_now:"conversation_detail.message_list.csat_can_not_rate_now",can_not_rate_bot_now:"cast.error.can_not_rate_bot_now",bot_frequency_limit:"cast.error.bot_frequency_limit",not_chat_with_bot:"cast.error.not_chat_with_bot"},w=function(t){n(o,t);var r=g(o);function o(t,n,a){var i;return e(this,o),(i=r.call(this,t,n,a)).name=i.constructor.name,i}return s(o,[{key:"handler",value:function(e){var t,r=null!==(t=A[this.errors])&&void 0!==t?t:"common.server_error.warning_tips";"cast.error.can_not_rate_bot_now"===r&&(0,y.checkSpecialShops)(e)&&(r="".concat(r,"_idscs"));var n=S(r);if("buyer_receiver_too_many_rating_card"===this.errors){var o,a,i=null!==(o=null===(a=this.data)||void 0===a?void 0:a.limit)&&void 0!==o?o:"";n=S(A.buyer_receiver_too_many_rating_card,{count:i})}return{message:n,show:!0,type:"fail"}}}]),o}(d);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}var N=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),C=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),L=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),P=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),I=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),D=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),k=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),M=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),x=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),G=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),H=function(t){n(o,t);var r=T(o);function o(){return e(this,o),r.apply(this,arguments)}return o}(d),j=function(e){switch(e){case 401:return N;case 403:return h;case 404:return C;case 422:return L;case 429:return P;case 451:return I;case 452:return D;case 491:return O;case 492:return k;case 493:return w;case 494:return M;case 495:return x;case 499:return H;case 500:return G;default:return Error}},B=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")};function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){K(a,n,o,i,c,"next",e)}function c(e){K(a,n,o,i,c,"throw",e)}i(void 0)}))}}var q=r(598),z=r.n(q),J=r(459);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Q=function(){function t(){e(this,t),this.shopsMap={}}var r;return s(t,[{key:"updateShopMap",value:function(e){this.shopsMap=$($({},this.shopsMap),e)}},{key:"getRegion",value:(r=Y(regeneratorRuntime.mark((function e(t,r){var n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}if(o=null===(n=this.shopsMap[r])||void 0===n?void 0:n.country){e.next=8;break}return e.next=5,ot({resource:"shop",id:r,params:{need_cache:1,cache_expires:600}});case 5:return a=e.sent,this.updateShopMap(F({},a.id,a)),e.abrupt("return",a.country);case 8:return e.abrupt("return",o);case 11:if(i=(0,y.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(i)&&!t){e.next=14;break}return e.abrupt("return","GLOBAL");case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}(),Z=new Q;function ee(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}"live"!==(0,y.getRuntimeServer)()&&(window.shopService=Z);var te=r(444),re=r.n(te),ne="CHAT_API",oe=function(){window.caches&&window.caches.delete(ne)};function ae(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Y(regeneratorRuntime.mark((function e(t,r){var n,o,a,i,c,u,s,f,_,p,l,d,E,v,h,b,R,m,O,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),o=n.searchParams,a=o.get("need_cache"),i=o.get("force_update"),c=o.get("_ts"),u=r.method&&"get"===r.method.toLowerCase(),s="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),f="&force_update=".concat(String(i)),_=t.replace(s,"").replace(f,"").replace(c||"",""),!(u&&a&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(ne);case 13:return p=e.sent,e.next=16,p.match(_);case 16:if(l=e.sent,d=Date.now(),!l){e.next=25;break}if(!(d<Number(l.headers.get("cache-expires")))||i){e.next=23;break}return e.abrupt("return",l);case 23:return e.next=25,p.delete(_);case 25:return e.next=27,re()(t,r);case 27:if(E=e.sent,v=E.clone(),200!==E.status){e.next=41;break}return h=ee(E.headers.entries()),b={},R=Number(o.get("cache_expires"))||3600,m=d+1e3*R,e.next=36,E.blob();case 36:O=e.sent,h.forEach((function(e){b[e[0]]=e[1]})),b["cache-expires"]=m,y=new Response(O,{headers:new Headers(b)});try{p.put(_,y)}catch(e){window.caches.delete(ne)}case 41:return e.abrupt("return",v);case 44:return e.abrupt("return",re()(t,r));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",re()(t,r));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var ce=r(672),ue=function(){var e=window.__SERVICEDOWN_STATT_TIME__,t=window.__SERVICEDOWN_END_TIME__,r=void 0!==e&&void 0!==t,n=Math.ceil(Date.now()/1e3);return r&&n>=e&&n<=t},se=function(e){B(e)||!ue()&&window.__CHAT_GLOBAL__.setServiceDownStatus&&ce.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))},fe=function(e,t){var r=new(j(e))(t.message,t.errors||t.error_code||t.errcode,t.data);if(r)throw r},_e=function(e,t,r){if(B(e)){var n=r.uri,o=r.resource;"br_site_is_close"===(t||{}).error_code&&function(e){var t;ue()?(t=e.split("?")[0]).endsWith("conversations")||t.endsWith("conversation/list")?window.__CHAT_GLOBAL__.setServiceDownStatus&&ce.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,list:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&ce.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,message:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&ce.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))}(n),[400,404].includes(e),[491,493].includes(e)?fe(e,t):401===e?(window.__CHAT_GLOBAL__.socket&&window.__CHAT_GLOBAL__.socket.close(),window.__CHAT_GLOBAL__.resetAction&&ce.store.dispatch(window.__CHAT_GLOBAL__.resetAction()),(0,y.removeItem)("mini-session"),(0,y.removeItem)("mini-sc_redirect"),"login"===o&&fe(e,t)):fe(e,t)}},pe=function(e){var t=e.uri,r=e.id,n=e.parentId;if(void 0!==r&&parseInt(r)<=0&&!t.includes("message_shortcuts/group")||void 0!==n&&parseInt(n)<=0)throw new Error},le=function(e,t,r){throw e||(t.offlineError=!0),t};function de(e){return Ee.apply(this,arguments)}function Ee(){return Ee=Y(regeneratorRuntime.mark((function e(t){var r,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){return(i=Y(regeneratorRuntime.mark((function e(){var t,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.read();case 2:if(t=e.sent,i=t.done,c=t.value,!i){e.next=7;break}return e.abrupt("return",JSON.parse(o.join("")));case 7:return u=n.decode(c,{stream:!0}),o.push(u),e.abrupt("return",a());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)},a=function(){return i.apply(this,arguments)},r=t.getReader(),n=new TextDecoder,o=[],e.abrupt("return",a());case 6:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}var ve,he,be=r(782),Re=r(830),me=r.n(Re),Oe=r(292),ye=r.n(Oe),Se={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"},ge={"94a2f272c378ddf18f5c88f4e951c709":"SHOW_HOME_PAGE",a5707a9d6695fc50e257b51aee9ec03b:"LOAD_RESOURCE",dd25761ed961c46f4a0725abf6325b3a:"RENDER_HOME_PAGE","65d0f06861e011436277b54e32e0e702":"SEND_MESSAGE_API",b2bad090fbb5b6eb526af0423326ba91:"SEND_MESSAGE_CONSUMING","00f7d4cb0b968ed35a91ae83c0346fe1":"FETCH_CONV_API",b7b04ad90caccf19961c3dcdf7063294:"FETCH_MESSAGE_API","7ce993bd22dee11001514ad2b8e760bf":"RENDER_MESSAGE_LIST_FROM_CONV"};ve={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",LOGIN_IN_HTML:"4075993c600862e7c604e35cd692a297",LOGIN_IN_SERVICE:"2845ad2751849e3d43b26a805a25dbb4",PRE_FETCH_USER_INFO:"36a82dac2154de34fa4c6d7e3da73a19",NON_PRE_FETCH_USER_INFO:"a9de236c14047b42eec108bf7f22f2ac",TRANSLATION_IN_HTML:"b3105979b5cc6448de8272e177db5741",TRANSLATION_IN_SERVICE:"acfba493a8c2d11ad323bc09c2d06603",CONVERSATION_MOUNTED:"53ddb086a61674f59a9d84e1a02f04a5",CONVERSATION_LOADED:"800c5562450216bccfad6cd11847c160",RECEIVE_CHATBOT_RESPONSE:"a6f37d623af1c31b5ae3eb333fc571c8",REPORT_T3:"b16720c32b08d2c2b4b9cebb66205520",REPORT_T4:"20749fffb5583f720b3eacf5013c4398",REPORT_ERROR:"ce4cc92284f6ed31f8266c8e676744c5",MESSAGE_LATENCY:"4cb5dab311e98cba8ecb48c5e3df9e12",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf"},he={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf"};var Ae,we={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE",START_SEND_MESSAGE:"START_SEND_MESSAGE",START_HANDLE_RESPONSE:"START_HANDLE_RESPONSE"},Te={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},Ne={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error",FETCH_CONV_ERROR:"Fetch Conversation Error",FETCH_SERVE_TODAY_CONV_ERROR:"Fetch Serve Today Conversation Error"},Ce={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error",FETCH_CONV_ERROR:"fetch_conversation_error",FETCH_SERVE_TODAY_CONV_ERROR:"fetch_serve_today_conversation_error"},Le=(Ne.TYPE_ERROR,Ne.RANGE_ERROR,Ne.SYNTAX_ERROR,Ne.REFERENCE_ERROR,Ce.TYPE_ERROR,Ce.RANGE_ERROR,Ce.SYNTAX_ERROR,Ce.REFERENCE_ERROR,function(){function t(){e(this,t)}return s(t,[{key:"reportLoadResource",value:function(){qe(Ue.LOAD_RESOURCE,0)}},{key:"reportRenderHomePage",value:function(e){qe(Ue.RENDER_HOME_PAGE,0,{isSidebar:e})}},{key:"reportShowHomePage",value:function(e){if(window.__MINICHAT_ENTRY_CLICKED__){var t=window.__MINICHAT_ENTRY_CLICKED__,r=t.startTime,n=t.fromPage,o=Date.now()-r;window.__MINICHAT_ENTRY_CLICKED__=void 0,e?setTimeout((function(){Ye(Te.APP,{duration:o,id:Ue.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:n}})}),1e3):Ye(Te.APP,{duration:o,id:Ue.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:n}})}}},{key:"reportWhetherPrefetchUserInfo",value:function(){window.__CHATEASY_LOCALE__?qe(Ue.PRE_FETCH_USER_INFO,0):qe(Ue.NON_PRE_FETCH_USER_INFO,0)}},{key:"reportShowMinichat",value:function(e,t){var r=Date.now()-window.__START_MINICHAT__;Ye(Te.APP,{duration:r,id:Ue.SHOW_WEBCHAT})}},{key:"reportSendMessageApi",value:function(e){qe(Ue.SEND_MESSAGE_API,0,{value:e})}},{key:"reportSendMessageConsuming",value:function(e){var t,r,n=null===(t=(performance.getEntriesByName("".concat(we.START_SEND_MESSAGE,"_").concat(null===(r=JSON.parse(e).content)||void 0===r?void 0:r.uid),"mark")||[])[0])||void 0===t?void 0:t.startTime,o=Date.now()-Math.round(performance.timeOrigin+n);Ye(Te.APP,{duration:o,id:Ue.SEND_MESSAGE_CONSUMING})}},{key:"reportFetchConvApi",value:function(e){var t=e.value,r=e.resource;qe(Ue.FETCH_CONV_API,0,{value:t,resource:r})}},{key:"reportFetchMessageApi",value:function(e){qe(Ue.FETCH_MESSAGE_API,0,{value:e})}},{key:"reportRenderMessageListFromConv",value:function(e){window.__CLICK_CONV__&&(Ye(Te.APP,{duration:Date.now()-window.__CLICK_CONV__,id:Ue.RENDER_MESSAGE_LIST_FROM_CONV,extra:{isFirstRender:e}}),window.__CLICK_CONV__=null)}},{key:"reportVideoUpload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qe(Ue.VIDEO_UPLOAD,performance.now()-e,t)}},{key:"reportVideoServiceDone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=performance.getEntriesByName("REPORT_UPLOAD_".concat(e),"mark")[0];if(r){performance.mark("SERVICE_DONE_".concat(e));var n=performance.getEntriesByName("SERVICE_DONE_".concat(e))[0].startTime-r.startTime;performance.clearMarks("REPORT_UPLOAD_".concat(e)),performance.clearMarks("SERVICE_DONE_".concat(e)),qe(Ue.SERVICE_DONE,n,t)}}},{key:"reportMessageSocket",value:function(e){var t=+new Date-+e;qe(Ue.MESSAGE_SOCKET,t)}},{key:"reportReadSocket",value:function(e){qe(Ue.READ_SOCKET,Date.now()-e)}},{key:"reportLoginFailed",value:function(e){qe(Ue.LOGIN_FAILED,0,e)}},{key:"reportSocketFailed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qe(Ue.SOCKET_FAILED,0,e)}},{key:"reportSharedTabs",value:function(e){qe(Ue.SHARED_TABS,e)}},{key:"reportLoginInHtml",value:function(){qe(Ue.LOGIN_IN_HTML,0)}},{key:"reportLoginInService",value:function(){qe(Ue.LOGIN_IN_SERVICE,0)}},{key:"reportFetchTranslationInHtml",value:function(){qe(Ue.TRANSLATION_IN_HTML,0)}},{key:"reportFetchTranslationInService",value:function(){qe(Ue.TRANSLATION_IN_SERVICE,0)}},{key:"reportT3OrT4",value:function(e){qe(e,0)}},{key:"reportChatbotApiError",value:function(){qe(Ue.REPORT_ERROR,0)}},{key:"reportAsyncTask",value:function(e,t){qe(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"reportReceiveChatbotResponse",value:function(){qe(Ue.RECEIVE_CHATBOT_RESPONSE,0)}}]),t}()),Pe=function(){return window.chatReportManager||(window.chatReportManager=new Le),window.chatReportManager};function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ke,Me,xe,Ge,He=function(e){Ae=e},je=!1,Be=location.host.includes("shopee.cn"),Fe=[],Ve=window.requestIdleCallback,Ue="live"===(0,y.getRuntimeServer)()?ve:he,We=function(){try{var e=performance.getEntriesByName(we.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(we.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(we.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(we.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(we.APP_RENDERING,"mark")[0].startTime;Fe.push({id:Ue.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:Ue.LOAD_STATIC,duration:Math.floor(t-e)},{id:Ue.APP_PREPARE,duration:Math.floor(r-t)},{id:Ue.LOGIN_API,duration:Math.floor(n-r)},{id:Ue.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},Ke=function(){try{var e=performance.getEntriesByName("ENTRY_CLICKED","mark")[0].startTime,t=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime,r=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime;Ue.CONVERSATION_MOUNTED&&e&&t&&Fe.push({id:Ue.CONVERSATION_MOUNTED,duration:Math.floor(t-e)}),Ue.CONVERSATION_LOADED&&t&&r&&Fe.push({id:Ue.CONVERSATION_LOADED,duration:Math.floor(r-t)})}catch(e){}},Ye=function(e,t){try{var r=null,n=performance.getEntriesByName(we.APP_RENDERING,"mark")[0].startTime;switch(e){case Te.WELCOME_PAGE:r=performance.getEntriesByName(we.RENDER_WELCOME_PAGE,"mark")[0].startTime,Fe.push({id:Ue.RENDER_WELCOME_PAGE,duration:Math.floor(r-n)});break;case Te.MESSAGE_LIST:r=performance.getEntriesByName(we.RENDER_MESSAGE_LIST,"mark")[0].startTime,Fe.push({id:Ue.RENDER_MESSAGE_LIST,duration:Math.floor(r-n)});break;case Te.CONVERSATION_LIST:r=performance.getEntriesByName(we.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Fe.push({id:Ue.RENDER_CONVERSATION_LIST,duration:Math.floor(r-n)})}Fe.push(t),Ve(ze,{timeout:2e3})}catch(e){}},qe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{Fe.push({id:e,duration:t,extra:r}),Ve(ze,{timeout:2e3})}catch(e){}};function ze(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Fe.length;){var t=Fe.shift(),r=t.id,n=t.duration,o=t.extra;r&&$e(r,n,o),"live"!==(0,y.getRuntimeServer)()&&Se[r]&&console.log("|-- 上报阶段: ",Se[r],", 耗时为: ".concat(n),", 数据: ",o),ge[r]&&console.log("|-- 新加上报点上报阶段: ",ge[r],", 耗时为: ".concat(n,", 数据："),o)}Fe.length&&Ve(ze,{timeout:2e3})}var Je,Xe=function(){if(!je){var e=(0,y.getRuntimeServer)(),t="live"===e,r=(0,y.getRuntimeRegion)(),n=(0,y.getRuntimeVersion)();ke=new be.MdapSdk({app_name:"minichat",secret_key:t?"b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127":"2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280",environment:e,region:r,app_version:n,sample:1}),Me=new(me())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages","webchat/api/v1.2/mini/messages",/[\\/]api[\\/]tsp[\\/].*/]}),xe=new(ye())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),Ge=new be.CustomPlugin({}),ke.use(Me),ke.use(xe),ke.use(Ge),je=!0}};function $e(e,t,r){je||Xe();var n={point_id:e,data:{userType:Ae,localOrCn:void 0!==Je?Je:Je=Be&&"CN"!==(0,y.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:"pcmall"}};t&&(n=De(De({},n),{},{duration:t})),r&&(n.data=De(De({},n.data),r)),Ge.sendData(n)}function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var et=(0,y.getRuntimeVersion)(),tt=function(){var e=Y(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null;try{t=y.LS.getItem("mini-session",!0)}catch(e){t=null}if(t){e.next=8;break}return e.next=7,(0,y.getItem)("mini-session");case 7:t=e.sent;case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rt={404:"Resource not found",452:"Tempory Error",500:"Internal server error",502:"Bad Gateway"},nt=90309999;function ot(e){return at.apply(this,arguments)}function at(){return at=Y(regeneratorRuntime.mark((function e(t){var r,n,o,a,i,c,u,s,f,_,p,l,d,E,v,h,b,R,m,O,S,g,A,w,T,N,C,L,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.server,o=t.subServer,a=t.version,i=void 0===a?"v1.2":a,c=t.parent,u=t.parentId,s=t.resource,f=t.id,_=t.suffix,p=t.method,l=void 0===p?"GET":p,d=t.credentials,E=void 0===d?"include":d,v=t.extension,h=t.params,b=void 0===h?{}:h,R=t.payload,m=t.headers,O=void 0===m?{}:m,S=t.namespace,g=void 0===S?"mini":S,A=t.fetcher,w=function(){if("sc"===_)return f;if("auth"===s)return u;if(b.shop_id)return b.shop_id;if(R)try{return JSON.parse(R).shop_id}catch(e){}},T=function(e,t){var r,n=t.session,o=t.shouldAddHeader,a=t.region,i=t.spcToken,c=null==n||null===(r=n.user)||void 0===r?void 0:r.uid;c&&(e._uid=c),et&&(e._v=et);var u=z().get("CTOKEN");u&&(e.csrf_token=u),i&&(e.SPC_CDS_CHAT=i),o&&(e["x-shop-region"]=a),e._api_source="pcmall"},N=function(e,t){return[e,Object.entries(t).filter((function(e){var t=W(e,2),r=(t[0],t[1]);return r||0===r})).map((function(e){var t=W(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&")].filter(Boolean).join("?")},C=function(){var e=z().get("SPC_CDS_CHAT");if(!e){e=(0,J.v4)();var t=window.location.host.split(".");["seller","banhang"].includes(t[0])&&t.shift(),z().set("SPC_CDS_CHAT",e,{domain:".".concat(t.join("."))})}return e},L=function(){var e=Y(regeneratorRuntime.mark((function e(t){var a,p,d,h,m,S,L,P,I,D,k,M,x,G,H,j,B,V,U,W,K,Y,q,z,J,X;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,tt();case 3:t=e.sent;case 4:if(p=(a=t||{}).token,d=a.user,h=(d=void 0===d?{}:d).type,m=0,"subaccount"!==h){e.next=15;break}return I=w(),e.next=12,Z.getRegion(!0,I);case 12:P=e.sent,e.next=16;break;case 15:P=(0,y.getRuntimeRegion)().toUpperCase();case 16:return k=(D=p&&"include"===E||!n)?{Authorization:"Bearer ".concat(p),"x-shop-region":P}:{},!n&&(n=(0,y.getApiServer)()),M=C(),r?(L=r,x={},M&&(x.SPC_CDS_CHAT=M),L=N(L,x)):(G=["https:/",n,o,i,g,c,u,s,f,_].filter(Boolean).join("/"),H=v?"".concat(G,".").concat(v):G,T(b,{session:t,shouldAddHeader:D,region:P,spcToken:M}),L=N(H,b)),e.prev=21,pe({uri:L,id:f,parentId:u}),j=Date.now(),B={method:l,credentials:E,headers:Ze(Ze({},k),O),body:R},V=A||ae,e.next=28,V(L,B);case 28:if(U=e.sent,m="number"==typeof U.status?U.status:U.__raw.status,A&&200===m&&R&&(null==(W=Pe())||W.reportSendMessageConsuming(R)),A?U.error===nt?fe(m=499,{message:"need captcha",errcode:m,data:null}):m=U.__raw.status:m=U.status,[200,204].includes(m)&&"report_upload"===s&&R&&(K=JSON.parse(R),Y=K.vid,performance.mark("REPORT_UPLOAD_".concat(Y))),se(m),200!==m){e.next=50;break}return q=null,e.prev=36,e.next=39,U.json();case 39:q=e.sent,e.next=45;break;case 42:e.prev=42,e.t0=e.catch(36),q=U;case 45:return z=q instanceof Array?F({},s,q):q,A&&R&&(S=JSON.parse(R).request_id,(0,y.setItem)(S,j)),e.abrupt("return",z);case 50:if(204!==m){e.next=54;break}return e.abrupt("return",null);case 54:e.t1=m,e.next=404===e.t1||452===e.t1||500===e.t1||502===e.t1?57:59;break;case 57:return J={message:rt[m]},e.abrupt("break",74);case 59:if(!A){e.next=71;break}return e.prev=60,e.next=63,de(null==U||null===(X=U.__raw)||void 0===X?void 0:X.body);case 63:J=e.sent,e.next=69;break;case 66:e.prev=66,e.t2=e.catch(60),J={message:"Server Error"};case 69:e.next=74;break;case 71:return e.next=73,U.json();case 73:J=e.sent;case 74:_e(m,J,{uri:L,resource:s});case 75:e.next=80;break;case 77:e.prev=77,e.t3=e.catch(21),le(m,e.t3);case 80:case"end":return e.stop()}}),e,null,[[21,77],[36,42],[60,66]])})));return function(t){return e.apply(this,arguments)}}(),P=window.__WEBCHAT_SESSION__,e.abrupt("return",L(P));case 8:case"end":return e.stop()}}),e)}))),at.apply(this,arguments)}var it=null,ct=function(e){e&&(it=e)},ut=null,st=function(e){var t=e.data,r=e.operation,n=void 0===r?y.TrackerOperation.CLICK:r,o=e.page,a=e.shopId,i=e.section,c=void 0===i?"":i,u=e.type,s=void 0===u?"":u;try{ut||(ut=window.BITrack?window.BITrack:window.trackingSDK);var f=function(e){var t=e.data,r=e.operation,n=e.page,o=e.shopId,a=e.section,i=e.type,c=it||{},u=c.shop_id,s=void 0===u?"":u,f=c.role,_=void 0===f?"":f,p=c.id,l=void 0===p?"":p;return{operation:r,page_section:a,target_type:i,page_type:n||"minichat_page",data:Object.assign({},{shopid:s||o,account_type:_||"shopee_user",account_id:l},t)}}({data:t,operation:n,page:o,shopId:a,section:c,type:s});ut({data:{type:"v3",timestamp:Date.now(),info:f}})}catch(e){console.warn("Tracker error",e)}},ft=new(r(187).EventEmitter),_t=(0,r(428).createBrowserHistory)({basename:"/chateasy"}),pt=function(){var e=_t.location,t=e&&e.pathname;return t&&t.startsWith("/")?t.split("/")[1]:t},lt=r(383);function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vt,ht=function(e,t,r){return new lt.schema.Entity(e,Et({},t),Et({},r))},bt=ht("users"),Rt=ht("affiliate"),mt=ht("messages"),Ot=ht("conversations"),yt=ht("orders"),St=ht("products"),gt=ht("offers"),At=ht("stickers"),wt=ht("shops"),Tt=ht("messageShortcuts"),Nt=ht("rateCards"),Ct=ht("agentConversations"),Lt=ht("contacts",{},{idAttribute:"account_id"}),Pt=ht("vouchers"),It={users:bt,affiliate:Rt,messages:mt,conversations:Ot,orders:yt,offers:gt,products:St,stickers:At,shops:wt,messageShortcuts:Tt,rateCards:Nt,agentConversations:Ct,contacts:Lt,vouchers:Pt},Dt=function(e,t){var r=It[e]||ht(e);return t instanceof Array?(0,lt.normalize)(t,[r]):(0,lt.normalize)(t,r)},kt=r(455),Mt=r.n(kt),xt=r(944),Gt=regeneratorRuntime.mark(Bt),Ht=[];vt=[202,215];var jt=function(e,t){var r=vt.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,y.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return re()(o).then(function(){var e=Y(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function Bt(e){var t,r,n,o,a,i;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.locale,r="live"===(0,y.getRuntimeServer)()||"live-test"===(0,y.getRuntimeServer)(),n=new(Mt())({name:"webchat"}),o={},c.next=6,n.create({locale:t,env:r?"live":"non-live",region:(0,y.getRuntimeRegion)(),translation:{resources:Ht,collections:vt}});case 6:if(a=c.sent,o=a.translation,!(0,y.checkEmptyObject)(o)){c.next=15;break}return i=[],vt.concat(Ht).forEach((function(e){i.push(jt(e,t))})),c.next=13,(0,xt.all)(i);case 13:c.sent.forEach((function(e){Object.assign(o,e)}));case 15:return c.abrupt("return",o);case 16:case"end":return c.stop()}}),Gt)}}(),v}())},96961:function(e,t,r){"use strict";e.exports=r(27449)}}]);