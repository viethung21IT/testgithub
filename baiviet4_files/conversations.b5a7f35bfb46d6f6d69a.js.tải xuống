(self.miniJsonp=self.miniJsonp||[]).push([[4997],{78232:function(e,r,t){var o;o=(e,r,t,o,n)=>(()=>{"use strict";var a={383:r=>{r.exports=e},975:e=>{e.exports=r},511:e=>{e.exports=o},644:e=>{e.exports=n},855:e=>{e.exports=t}},c={};function s(e){var r=c[e];if(void 0!==r)return r.exports;var t=c[e]={exports:{}};return a[e](t,t.exports,s),t.exports}s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{s.r(i),s.d(i,{activeListTabSelector:()=>d,allConversationIdsSelector:()=>w,allTotalConversationsCountMapSelector:()=>Be,allTotalConversationsCountSelector:()=>ze,bannerInfoSelector:()=>G,bizIdSelector:()=>k,bizIdsSelector:()=>x,changeChatWithTypeSelector:()=>F,chatWithTypeListSelector:()=>W,chatWithTypeSelector:()=>z,conversationBeenDeletedSelector:()=>Re,conversationDirectionSelector:()=>J,conversationHttpStatusSelector:()=>H,conversationIdsSelector:()=>P,conversationLastMessageSelector:()=>lr,conversationsSelector:()=>K,curConvsMessageSelector:()=>yr,curMessagesRelatedSelector:()=>sr,currentAffiliateSelector:()=>_e,currentBuyerIdSelector:()=>ne,currentBuyerSelector:()=>ge,currentBuyerShopIdSelector:()=>he,currentBuyerShopSelector:()=>ye,currentConversationBuyerIdSelectors:()=>ie,currentConversationCanReadSelector:()=>V,currentConversationHasLoadingSelector:()=>Ye,currentConversationIdSelector:()=>N,currentConversationMaxOptionHideTimeSelectors:()=>ue,currentConversationSelector:()=>oe,currentConversationShopIdSelectors:()=>se,currentConversationShopRegionSelectors:()=>ce,currentConversationShopSelectors:()=>ae,currentConversationStatusSelectors:()=>le,currentConversationToNameSelector:()=>Oe,currentConversationTranslationAccessSelector:()=>me,currentPendingOffersCountSelector:()=>we,currentSellerAccountIdSelector:()=>je,currentShopIdSelector:()=>pe,defaultCount:()=>Ue,degradeConversationIdsSelector:()=>$,feedbackSelector:()=>br,filterSelector:()=>ee,filteredConversationsSelector:()=>re,getConversation:()=>de,getConversationPendingOffersCountSelector:()=>De,getConversationShopId:()=>ve,getConversationShopRegion:()=>Le,getConversations:()=>Se,getConversationsSelector:()=>b,getConvsMessagesRelatedSelector:()=>ir,getMessageSelector:()=>cr,hasPinFlagSelector:()=>p,inlocationSelector:()=>j,isChatAvailiableSelector:()=>Y,isDriverSelector:()=>B,isNavigateToUnreadMessageSelector:()=>Me,keywordSelector:()=>Te,listsHashSelector:()=>be,mediaListSelector:()=>mr,messagesRelatedMapSelector:()=>tr,missedReadNoticeCountSelector:()=>L,navigateToUnreadMessageIdSelector:()=>Pe,noticesCountSelector:()=>Or,pinnedConversationIdsSelector:()=>A,readRequestIdsSelector:()=>D,reconnectFlagSelector:()=>Rr,redirectionInfoSelector:()=>Ge,replyToMessageSelector:()=>Cr,resultsSelector:()=>fe,reverseMessagesSelector:()=>pr,searchConversationHttpStatusSelector:()=>Ce,selectVideoInfoByKey:()=>nr,selectVideoInfoKeyByVid:()=>ar,serveTodayAllConversationIdsSelector:()=>m,serveTodayAutoRepliedConversationIdsSelector:()=>f,serveTodayAutoRepliedConversationsSelector:()=>O,serveTodayConversationHttpStatusSelector:()=>g,serveTodayConversationsSelector:()=>I,serveTodayFolderStatusSelector:()=>v,serveTodayManuallyRepliedConversationIdsSelector:()=>C,serveTodayManuallyRepliedConversationsSelector:()=>E,serveTodayOnlyConversationsSelector:()=>M,serveTodayPinnedConversationIdsSelector:()=>y,serveTodayUnrepliedConversationIdsSelector:()=>T,serveTodayUnrepliedConversationsSelector:()=>R,serveTodayWaitingUpdatedRecordsSelector:()=>S,shopAccessSelector:()=>Ie,showFrozenTipSelector:()=>We,showLoadingMessagesMapSelector:()=>xe,singleConversationIdsSelector:()=>h,singleConversationMarkInfoSelector:()=>Fe,singleConversationStateSelector:()=>_,sortedConversationsSelector:()=>te,totalConversationsCountSelector:()=>Ne,twoTabsAllConversationIdsSelector:()=>Ve,updateTimeNowSelector:()=>U});var e=s(383),r=s(975),t=s(855),o=s(511),n=s(644);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var u=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.serveToday)||{}},d=(0,r.createSelector)(u,(e=>e.activeListTab)),v=(0,r.createSelector)(u,(e=>e.folderStatus)),S=(0,r.createSelector)(u,(e=>e.waitingUpdatedRecords||{})),p=(0,r.createSelector)(u,(e=>e.hasPinFlag||{})),g=(0,r.createSelector)(u,(e=>e.status||"")),_=e=>(0,r.createSelector)(u,(r=>r[e]||{})),h=e=>(0,r.createSelector)(_(e),(e=>e.conversationIds||[])),y=(0,r.createSelector)(u,(e=>(e[t.ServeTodayTab.PINNED]||{}).conversationIds||[])),T=(0,r.createSelector)(u,(e=>(e[t.ServeTodayTab.UNREPLIED]||{}).conversationIds||[])),f=(0,r.createSelector)(u,(e=>(e[t.ServeTodayTab.AUTOREPLY]||{}).conversationIds||[])),C=(0,r.createSelector)(u,(e=>(e[t.ServeTodayTab.MANUALREPLY]||{}).conversationIds||[])),m=(0,r.createSelector)(y,T,f,C,((e,r,t,o)=>[...e,...r,...t,...o])),b=t=>(0,r.createSelector)(o.conversationEntitiesSelector,h(t),((r,t)=>((0,e.denormalize)(t,[n.conversationSchema],{conversations:r})||[]).filter(Boolean))),R=(0,r.createSelector)(b(t.ServeTodayTab.UNREPLIED),(e=>(e.sort(((e,r)=>parseInt(r.latest_message_id)-parseInt(e.latest_message_id))),e))),O=(0,r.createSelector)(b(t.ServeTodayTab.AUTOREPLY),(e=>e.sort(((e,r)=>parseInt(r.latest_message_id)-parseInt(e.latest_message_id))))),E=(0,r.createSelector)(b(t.ServeTodayTab.MANUALREPLY),(e=>e.sort(((e,r)=>parseInt(r.latest_message_id)-parseInt(e.latest_message_id))))),I=(0,r.createSelector)(v,b(t.ServeTodayTab.PINNED),R,O,E,((e,r,o,n,a)=>{var c=[],s={[t.ServeTodayTab.PINNED]:r,[t.ServeTodayTab.UNREPLIED]:o,[t.ServeTodayTab.AUTOREPLY]:n,[t.ServeTodayTab.MANUALREPLY]:a},i=r.map((e=>e.id))||[];return t.ServeTodayFolders.forEach((r=>{var o=s[r];r!==t.ServeTodayTab.PINNED&&(o=o.filter((e=>!i.includes(e.id))),r===t.ServeTodayTab.AUTOREPLY&&(o=o.map((e=>l(l({},e),{},{isAutoReply:!0}))))),o.length&&(c=e[r]?c.concat([{key:r,id:"".concat(r,"Tab")},...o]):c.concat([{key:r,id:"".concat(r,"Tab")}]))})),c})),M=(0,r.createSelector)(I,(e=>e.filter((e=>!e.id.includes("Tab"))))),P=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.conversationIds)||[]},A=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.pinnedConversationIds)||[]},w=(0,r.createSelector)(P,A,((e,r)=>{var t=e.filter((e=>!r.includes(e)));return r.concat(t)})),D=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.readRequestIds)||[]},L=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.missedReadNoticeCount)||0},j=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.inlocation)||!1},U=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.updateTimeNow)||"0"},N=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.currentConversationId)||null},z=e=>{var r;return null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.chatWithType},B=(0,r.createSelector)(z,(e=>e===t.ChatWithTypeEnum.Driver)),k=(0,r.createSelector)(z,o.sellerDriverWhitelistSelector,o.amsFeatureToggleSelector,((e,r,o)=>!r&&e===t.ChatWithTypeEnum.Driver||!o&&t.ChatWithTypeEnum.Affiliate?t.ChatWithTypeMap.buyer:t.ChatWithTypeMap[e])),F=(0,r.createSelector)(z,k,((e,r)=>t.ChatWithTypeMap[e]!==r)),W=(0,r.createSelector)(o.sellerDriverWhitelistSelector,o.amsFeatureToggleSelector,((e,r)=>{var o=[t.ChatWithTypeEnum.Buyer];return e&&o.push(t.ChatWithTypeEnum.Driver),r&&o.push(t.ChatWithTypeEnum.Affiliate),o})),x=(0,r.createSelector)(W,(e=>e.map((e=>t.ChatWithTypeMap[e])))),Y=e=>{var r;return null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.isChatAvailiable},G=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.topBannerInfo)||{}},V=e=>{var r;return(0,o.judgeUndefined)({defaultValue:!0,value:null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.currentConversationCanRead})},H=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.status)||""},J=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.direction)||""},K=(0,r.createSelector)(o.conversationEntitiesSelector,w,((r,t)=>((0,e.denormalize)(t,[n.conversationSchema],{conversations:r})||[]).filter(Boolean))),q=(0,r.createSelector)(K,N,((e,r)=>e.filter((e=>{var{id:t,unread_count:o}=e;return e&&(o>0||t===r)})))),Q=(0,r.createSelector)(K,(e=>e.filter((e=>e.isPinned)))),X=(0,r.createSelector)(K,(e=>e.filter((e=>e.status&&"closed"===e.status)))),Z=(0,r.createSelector)(K,N,((e,r)=>e.filter((e=>{var{unreplied:t,id:o}=e;return void 0===t||t||!t&&o===r})))),$=(0,r.createSelector)(K,(e=>e.filter((e=>e.lack)).map((e=>e.id))||[])),ee=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.filter)||"All"},re=(0,r.createSelector)(ee,K,q,Q,X,Z,((e,r,t,o,n,a)=>({All:r,Unread:t,Pinned:o,Closed:n,Unreplied:a}[e]))),te=(0,r.createSelector)(re,A,o.waitingTimeFilterSelector,ee,((e,r,t,o)=>{var n=e.filter((e=>!r.includes(e.id))),a=e.filter((e=>r.includes(e.id)));return n.sort(((e,r)=>parseInt(r.latest_message_id)-parseInt(e.latest_message_id))),a.concat(n).filter((e=>void 0===e.faking))})),oe=(0,r.createSelector)(K,I,N,o.isSubAccountSelector,j,o.userEntitiesSelector,o.conversationEntitiesSelector,o.showChatServingFeatureSelector,((r,t,o,a,c,s,i,l)=>{var u=(l?[...r,...t]:r).find((e=>e.id===o))||{};if(c&&!u.id&&(u=(0,e.denormalize)(o,n.conversationSchema,{conversations:i})||{}),!a&&u.lack){var d=u.to_id,v=(0,e.denormalize)(d,n.userSchema,{users:s})||{},S={to_shop_id:v.shop_id,to_status:v.status,to_name:v.name||"-",to_avatar:v.avatar};return Object.assign(u,S)}return u})),ne=(0,r.createSelector)(oe,(e=>{var{to_id:r}=e||{};return r||null})),ae=(0,r.createSelector)(oe,o.shopsEntitiesSelector,((r,t)=>(0,e.denormalize)(r.shop_id,n.shopSchema,{shops:t})||{})),ce=(0,r.createSelector)(ae,(e=>(null==e?void 0:e.country)||"SG")),se=(0,r.createSelector)(oe,(e=>e.shop_id)),ie=(0,r.createSelector)(oe,(e=>e.to_id)),le=(0,r.createSelector)(oe,(e=>e.status)),ue=(0,r.createSelector)(oe,(e=>e.max_general_option_hide_time)),de=t=>(0,r.createSelector)(o.conversationEntitiesSelector,(r=>(0,e.denormalize)(t,n.conversationSchema,{conversations:r})||{})),ve=e=>(0,r.createSelector)(de(e),(e=>e.shop_id)),Se=e=>(0,r.createSelector)(K,I,o.showChatServingFeatureSelector,((r,t,o)=>{var n=o?[...r,...t]:r;return e.map((e=>n.find((r=>r.id===e)))).filter(Boolean)})),pe=(0,r.createSelector)(oe,(e=>{var{shop_id:r}=e||{};return r||null})),ge=(0,r.createSelector)(o.userEntitiesSelector,oe,((r,t)=>t?(0,e.denormalize)(t.to_id,n.userSchema,{users:r}):{})),_e=(0,r.createSelector)(o.affiliateEntitiesSelector,oe,((r,t)=>t?(0,e.denormalize)(t.to_id,n.affiliateSchema,{affiliate:r}):{})),he=(0,r.createSelector)(oe,(e=>{var{to_shop_id:r}=e||{};return r||null})),ye=(0,r.createSelector)(he,o.shopsEntitiesSelector,((r,t)=>(0,e.denormalize)(r,n.shopSchema,{shops:t})||{})),Te=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.keyword)||""},fe=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.results)||[]},Ce=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.searchStatus)||""},me=(0,r.createSelector)(oe,(e=>e.translationAccess)),be=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.listsHash)||{}},Re=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.conversationBeenDeleted)||!1},Oe=(0,r.createSelector)(oe,(e=>{var{to_name:r}=e||{};return r})),Ee={hasSCAccess:!0,hasEditOrderAccess:!0,hasViewOrderAccess:!0,hasViewProductAccess:!0,hasEditVoucherAccess:!0,hasViewVoucherAccess:!0,hasViewRrOrderAccess:!0,hasOrderDetailAccess:!0},Ie=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.access)||Ee},Me=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.isNavigateToUnreadMessage)||!1},Pe=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.navigateToUnreadMessageId)||""},Ae=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.pendingOffersCount)||{}},we=(0,r.createSelector)(oe,Ae,((e,r)=>{var{shop_id:t,to_id:o}=e;return r["".concat(t,"_").concat(o)]||0})),De=e=>(0,r.createSelector)(de(e),Ae,((e,r)=>{var{shop_id:t,to_id:o}=e;return r["".concat(t,"_").concat(o)]||0})),Le=t=>(0,r.createSelector)(ve(t),o.shopsEntitiesSelector,((r,t)=>{var o=(0,e.denormalize)(r,n.shopSchema,{shops:t})||{};return(null==o?void 0:o.country)||"SG"})),je=(0,r.createSelector)(o.isSubAccountSelector,o.currentUserIdSelector,ae,((e,r,t)=>e?t.user_id:r)),Ue={unrepliedCount:0,duesoonCount:0,overdueCount:0,pinnedCount:0,unreadCount:0,serveTodayUnrepliedCount:0,serveTodayDuesoonCount:0,serveTodayOverdueCount:0,serveTodayPinnedCount:0,serveTodayBotRepliedCount:0,serveTodayManualRepliedCount:0},Ne=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.totalConversationsCount)||Ue},ze=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.allTotalConversationsCount)||{}},Be=(0,r.createSelector)(W,ze,((e,r)=>e.reduce(((e,t)=>{var o,n,a=(null===(o=r["with_".concat(t,"_attribute")])||void 0===o?void 0:o.attributes)||{},c=(null===(n=r["with_".concat(t,"_attribute")])||void 0===n?void 0:n.serving_today_attributions)||{},{total_unreplied_conv_count:s,total_due_soon_conv_count:i,total_over_due_conv_count:l,total_pinned_conv_count:u,total_unread_conv_count:d}=a,{total_unreplied_conv_count:v,total_due_soon_conv_count:S,total_over_due_conv_count:p,total_pinned_conv_count:g,total_bot_replied_count:_,total_manual_replied_count:h,total_unread_conv_count:y}=c,T={unrepliedCount:s,duesoonCount:i,overdueCount:l,pinnedCount:u,unreadCount:d,serveTodayUnrepliedCount:v,serveTodayDuesoonCount:S,serveTodayOverdueCount:p,serveTodayPinnedCount:g,serveTodayBotRepliedCount:_,serveTodayManualRepliedCount:h,serveTodayUnreadCount:y};return e[t]=T||Ue,e}),{}))),ke=e=>{var r;return(null==e||null===(r=e.conversationReducer)||void 0===r?void 0:r.conversationMark)||{}},Fe=e=>(0,r.createSelector)(ke,(r=>r[e])),We=(0,r.createSelector)(o.shopTranslationSettingsSelector,o.isSubAccountSelector,pe,o.currentUserShopIdSelector,((e,r,t,o)=>{var n=r?t:o,{userStatus:a}=e[n]||{};return"frozen"===a})),xe=e=>{var r;return null===(r=e.conversationReducer)||void 0===r?void 0:r.showLoadingMessagesMap},Ye=(0,r.createSelector)(N,xe,((e,r)=>{var t,o,n=r&&r[e],a=Object.entries(n||{})||[],c=a.some((([e,r])=>null==r?void 0:r.showLoading));return a.forEach((([e,r],n)=>{var{startTime:a}=r;(0===n||a<t)&&(t=a,o=r.isSend)})),{hasLoading:c,isSend:o,earliestStartTime:t}})),Ge=e=>{var r;return null===(r=e.conversationReducer)||void 0===r?void 0:r.redirectionInfo},Ve=(0,r.createSelector)(o.showChatServingFeatureSelector,w,m,((e,r,t)=>e?[...r,...t]:r));function He(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function Je(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?He(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):He(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Ke,{MSG_TYPE_OFFER:qe,MSG_TYPE_ORDER:Qe,MSG_TYPE_PRODUCT:Xe,MSG_TYPE_FAQ_UNSUPPORTED:Ze,MSG_TYPE_FAQ_LIVEAGENT_PROMPT:$e,MSG_TYPE_RATE_CARD:er}=t.MessageTypes,rr=[Qe,Xe],tr=(0,r.createSelector)((e=>e),(e=>(e.messageReducer||{}).messagesRelatedMap||{})),or=e=>{var r;return(null===(r=e.messageReducer)||void 0===r?void 0:r.videoMap)||{}},nr=e=>(0,r.createSelector)(or,(r=>JSON.parse(JSON.stringify(r[e]||{})))),ar=e=>(0,r.createSelector)(or,(r=>Object.keys(r).find((t=>r[t].vid===e)))),cr=t=>(0,r.createSelector)(o.messageEntitiesSelector,(r=>(0,e.denormalize)(t,n.messageSchema,{messages:r}))),sr=(0,r.createSelector)(N,tr,((e,r)=>r[e]||{all:[]})),ir=e=>(0,r.createSelector)(tr,(r=>r[e]||{all:[],sending:[],failed:[]})),lr=(Ke=e=>(0,r.createSelector)(ir(e),de(e),o.messageEntitiesSelector,((e,r,t)=>(0,o.getConversationLastMessage)(e,r,t))),function(){var e=Array.prototype.slice.call(arguments);return e in(Ke.memoize=Ke.memoize||{})?Ke.memoize[e]:Ke.memoize[e]=Ke.apply(this,e)}),ur=(0,r.createSelector)(sr,(e=>{var r=[...e.all||[]];return e.securityTipsMessageId&&r.push(e.securityTipsMessageId),r})),dr=(0,r.createSelector)(sr,(e=>e.sending||[])),vr=(0,r.createSelector)(sr,(e=>e.failed||[])),Sr=(0,r.createSelector)(o.messageEntitiesSelector,ur,((r,t)=>((0,e.denormalize)(t,[n.messageSchema],{messages:r})||[]).filter(Boolean))),pr=(0,r.createSelector)(Sr,(e=>e.reverse())),gr=(0,r.createSelector)(oe,pr,((e,r)=>e?r.filter(Boolean).reduce(((e,r)=>{var{type:t,source_type:o,source_content:n,content:a}=r;if(!o||t===qe||[-1,0].includes(n["".concat(o,"_id")]))return e;if(rr.includes(t)&&n){var c="".concat(t,"_id");if(a[c]===n[c])return e}var{lastSourceMessage:s,sourceList:i}=e;if(!i.length)return{sourceList:i.concat(r),lastSourceMessage:r};if(o===Xe){var l=null==n?void 0:n.product_id,u=s.source_content&&s.source_content.product_id;if(!l||u===l)return e}else if(o===Qe){var d=null==n?void 0:n.order_id,v=s.source_content&&s.source_content.order_id;if(!d||[-1,0,v].includes(d))return e}return{sourceList:i.concat(r),lastSourceMessage:r}}),{sourceList:[],lastSourceMessage:null}).sourceList:[])),_r=(0,r.createSelector)(gr,(e=>e.map((e=>e.id)))),hr=(0,r.createSelector)(o.entitiesSelector,Sr,((r,t)=>{var o=t.filter((e=>e&&e.type===qe)).map((e=>e.content.offer_id));return(0,e.denormalize)(o,[n.offerSchema],r)})),yr=(0,r.createSelector)(pr,_r,dr,vr,oe,o.rateCardEntitiesSelector,hr,((e,r,o,n,a,c,s)=>a?e.filter((e=>{if(!e)return!1;var{content:r,type:t}=e;return!(![Ze,$e].includes(t)&&(!r||r&&0===Object.keys(r).length))})).map((e=>{var a=o.includes(e.id)?t.MessageSendStatus.SENDING:n.includes(e.id)?t.MessageSendStatus.FAILED:e.send_status?t.MessageSendStatus.SUCCEED:null,i=r.includes(e.id),l=Object.assign({},e,{send_status:a,hasMessageSource:i}),{type:u,content:d={},message_option:v}=l;switch(u){case qe:var S=s.find((e=>e&&e.id===d.offer_id));l=Object.assign({},l,{textContent:S});break;case er:var p=c[d.card_id];p&&(l=Object.assign({},l,{textContent:p}))}return(0,t.hasTargetMessageOption)(v,t.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(l=Je(Je({},l),{},{send_status:t.MessageSendStatus.FAILED,errorCode:t.MessageErrorCode.BLACKLIST})),l})):[])),Tr=(0,r.createSelector)((e=>{var r;return null==e||null===(r=e.messageReducer)||void 0===r?void 0:r.reply}),(e=>e?e.toMessageId:{})),fr=(0,r.createSelector)(N,Tr,((e,r)=>r[e]||"")),Cr=(0,r.createSelector)(fr,o.messageEntitiesSelector,((r,t)=>(0,e.denormalize)(r,n.messageSchema,{messages:t}))),mr=(0,r.createSelector)(N,(e=>{var r;return(null===(r=e.mediaPreviewerReducer)||void 0===r?void 0:r.mediaMap)||{}}),((e,r)=>r[e]||[])),br=e=>{var r;return(null==e||null===(r=e.socketReducer)||void 0===r?void 0:r.feedback)||void 0},Rr=e=>{var r;return(null==e||null===(r=e.socketReducer)||void 0===r?void 0:r.reconnectFlag)||!1},Or=e=>{var r;return(null==e||null===(r=e.socketReducer)||void 0===r?void 0:r.noticesCount)||0}})(),i})(),e.exports=o(t(82677),t(20573),t(29494),t(53402),t(96961))},66633:function(e,r,t){"use strict";e.exports=t(78232)}}]);