(self.miniJsonp=self.miniJsonp||[]).push([[6348],{27830:function(e,t,r){var n;n=(e,t,r,n,o,a,i,s,c,_,d,u,E)=>(()=>{"use strict";var f={701:(e,t,r)=>{r.d(t,{t:()=>a});var n=r(661),o=r.n(n),a=o().t.bind(o())},187:e=>{var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}l(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&l(e,"error",t,{once:!0})}(e,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function _(e,t,r,n){var o,a,i,_;if(s(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),i=a[t]),void 0===i)i=a[t]=r,++e._eventsCount;else if("function"==typeof i?i=a[t]=n?[r,i]:[i,r]:n?i.unshift(r):i.push(r),(o=c(e))>0&&i.length>o&&!i.warned){i.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=i.length,_=d,console&&console.warn&&console.warn(_)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=d.bind(n);return o.listener=r,n.wrapFn=o,o}function E(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):p(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function l(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){n.once&&e.removeEventListener(t,o),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=a[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var _=c.length,d=p(c,_);for(r=0;r<_;++r)n(d[r],this,t)}return!0},a.prototype.addListener=function(e,t){return _(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return _(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,a,i;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){i=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,i||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return E(this,e,!0)},a.prototype.rawListeners=function(e){return E(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},782:e=>{e.exports=i},830:e=>{e.exports=s},292:e=>{e.exports=c},428:e=>{e.exports=_},661:t=>{t.exports=e},444:e=>{e.exports=o},598:e=>{e.exports=r},383:e=>{e.exports=d},944:e=>{e.exports=E},855:e=>{e.exports=t},672:e=>{e.exports=a},455:e=>{e.exports=u},459:e=>{e.exports=n}},p={};function l(e){var t=p[e];if(void 0!==t)return t.exports;var r=p[e]={exports:{}};return f[e](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var h={};return(()=>{l.r(h),l.d(h,{$tracker:()=>Ke,Blacklist:()=>v,CancelOrderWarning:()=>O,CustomError:()=>o,EventBus:()=>Ye,ExceptionName:()=>ae,Forbidden:()=>t,HTTPError:()=>S,InternalServerError:()=>b,Limiting:()=>E,MarkName:()=>ne,NeedCaptchaVerify:()=>m,NotFound:()=>d,ReportComponent:()=>oe,ReportPoint:()=>ye,TemporyError:()=>p,Unauthoried:()=>_,UnprocessableEntity:()=>u,UntrustedNetwork:()=>f,UnverifiedPhoneNumber:()=>R,Webview:()=>c,affiliateSchema:()=>et,agentConversationSchema:()=>dt,clearApiCache:()=>H,collectAsyncTask:()=>we,collectComponentTask:()=>Ce,collectConversationLoadTask:()=>Ne,collectLoadTask:()=>Te,configTrackerUser:()=>Ue,contactsSchema:()=>ut,conversationSchema:()=>rt,exceptionTag:()=>ie,fetch:()=>Fe,getReportManager:()=>fe,getRouterPath:()=>ze,getTranslation:()=>mt,history:()=>qe,initMDAPSdk:()=>Ie,isError:()=>A,isInServiceDownDuration:()=>F,mdapConfig:()=>be,messageSchema:()=>tt,messageShortcutsSchema:()=>ct,normalize:()=>pt,offerSchema:()=>at,orderSchema:()=>nt,productSchema:()=>ot,rateCardsSchema:()=>_t,reportApiTime:()=>De,shopSchema:()=>st,shopService:()=>I,stickerSchema:()=>it,userSchema:()=>Ze,vouchersSchema:()=>Et});class e extends Error{constructor(e,t,r){super(e),this.name=this.constructor.name,this.errors=t,this.data=r}}class t extends e{constructor(e,t,r){super(e,t,r),this.name=this.constructor.name}handler(){}}var r=l(701).t,n=["unauthorized_for_shop","target_subaccount_unauthorized_for_shop","target_group_unauthorized_for_shop","conversation_not_belong_to_you","conversation_not_dispatch","cannot_move_conversation_to_yourself","target_subaccount_not_online","subaccount_conversation_not_found","conversation_closed"];class o extends e{constructor(e,t,r){super(e,t,r),this.name=this.constructor.name,this.handler=this.handler.bind(this)}handler(){var e="";if(n.includes(this.errors))e="forward.error.".concat(this.errors);else switch(this.errors){case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title";break;case"too_many_requests_for_unique_fields":e="feedback_modal.too_many_requests_for_unique_fields";break;default:e="common.server_error.warning_tips"}return{show:!0,type:"fail",message:r(e)}}}var a=l(855),i=l(701).t,s={rating_card_expired:"conversation_detail.message_list.csat_expired",have_submited_csat:"conversation_detail.message_list.csat_have_submited",no_organic_within_24hr:"conversation_detail.message_list.csat_no_organic_within_24hr",send_rating_card_too_frequently:"conversation_detail.message_list.csat_send_rating_card_too_frequently",buyer_receiver_too_many_rating_card:"conversation_detail.message_list.csat_buyer_receiver_too_many_rating_card",buyer_active_feedback_off:"conversation_detail.message_list.csat_buyer_active_feedback_off",not_chat_with_agent:"conversation_detail.message_list.csat_not_chat_with_agent",have_received_rating_card_today:"conversation_detail.message_list.csat_have_received_rating_card_today",can_not_rate_now:"conversation_detail.message_list.csat_can_not_rate_now",can_not_rate_bot_now:"cast.error.can_not_rate_bot_now",bot_frequency_limit:"cast.error.bot_frequency_limit",not_chat_with_bot:"cast.error.not_chat_with_bot"};class c extends e{constructor(e,t,r){super(e,t,r),this.name=this.constructor.name}handler(e){var t,r=null!==(t=s[this.errors])&&void 0!==t?t:"common.server_error.warning_tips";"cast.error.can_not_rate_bot_now"===r&&(0,a.checkSpecialShops)(e)&&(r="".concat(r,"_idscs"));var n=i(r);if("buyer_receiver_too_many_rating_card"===this.errors){var o,c,_=null!==(o=null===(c=this.data)||void 0===c?void 0:c.limit)&&void 0!==o?o:"";n=i(s.buyer_receiver_too_many_rating_card,{count:_})}return{message:n,show:!0,type:"fail"}}}class _ extends e{}class d extends e{}class u extends e{}class E extends e{}class f extends e{}class p extends e{}class v extends e{}class O extends e{}class R extends e{}class b extends e{}class m extends e{}var S=e=>{switch(e){case 401:return _;case 403:return t;case 404:return d;case 422:return u;case 429:return E;case 451:return f;case 452:return p;case 491:return o;case 492:return v;case 493:return c;case 494:return O;case 495:return R;case 499:return m;case 500:return b;default:return Error}},A=e=>"".concat(e).startsWith("4")||"".concat(e).startsWith("5");function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t,r,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){y(a,n,o,i,s,"next",e)}function s(e){y(a,n,o,i,s,"throw",e)}i(void 0)}))}}var N=l(598),C=l.n(N),w=l(459);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=new class{constructor(){this.shopsMap={}}updateShopMap(e){this.shopsMap=P(P({},this.shopsMap),e)}getRegion(e,t){var r=this;return T((function*(){if(t){var n,o=null===(n=r.shopsMap[t])||void 0===n?void 0:n.country;if(!o){var i=yield Fe({resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});return r.updateShopMap({[i.id]:i}),i.country}return o}var s=(0,a.getRuntimeRegion)().toUpperCase();return["KR","CN"].includes(s)||e?"GLOBAL":s}))()}};"live"!==(0,a.getRuntimeServer)()&&(window.shopService=I);var D=l(444),M=l.n(D),G="CHAT_API",H=()=>{window.caches&&window.caches.delete(G)};function j(e,t){return k.apply(this,arguments)}function k(){return(k=T((function*(e,t){try{var r=new URL(e).searchParams,n=r.get("need_cache"),o=r.get("force_update"),a=r.get("_ts"),i=t.method&&"get"===t.method.toLowerCase(),s="&csrf_token=".concat(encodeURIComponent(r.get("csrf_token")||"")),c="&force_update=".concat(String(o)),_=e.replace(s,"").replace(c,"").replace(a||"","");if(i&&n&&window.caches){var d=yield window.caches.open(G),u=yield d.match(_),E=Date.now();if(u){if(E<Number(u.headers.get("cache-expires"))&&!o)return u;yield d.delete(_)}var f=yield M()(e,t),p=f.clone();if(200===f.status){var l=[...f.headers.entries()],h={},v=E+1e3*(Number(r.get("cache_expires"))||3600),O=yield f.blob();l.forEach((e=>{h[e[0]]=e[1]})),h["cache-expires"]=v;var R=new Response(O,{headers:new Headers(h)});try{d.put(_,R)}catch(e){window.caches.delete(G)}}return p}return M()(e,t)}catch(r){return M()(e,t)}}))).apply(this,arguments)}var x=l(672),F=()=>{var e=window.__SERVICEDOWN_STATT_TIME__,t=window.__SERVICEDOWN_END_TIME__,r=void 0!==e&&void 0!==t,n=Math.ceil(Date.now()/1e3);return r&&n>=e&&n<=t},V=e=>{A(e)||!F()&&window.__CHAT_GLOBAL__.setServiceDownStatus&&x.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))},B=(e,t)=>{var r=new(S(e))(t.message,t.errors||t.error_code||t.errcode,t.data);if(r)throw r},U=(e,t,r)=>{if(A(e)){var{uri:n,resource:o}=r,{error_code:i}=t||{};"br_site_is_close"===i&&(e=>{var t;F()?(t=e.split("?")[0]).endsWith("conversations")||t.endsWith("conversation/list")?window.__CHAT_GLOBAL__.setServiceDownStatus&&x.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,list:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&x.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!0,message:!0})):window.__CHAT_GLOBAL__.setServiceDownStatus&&x.store.dispatch(window.__CHAT_GLOBAL__.setServiceDownStatus({alert:!1,closed:!1,list:!1,message:!1}))})(n),[400,404].includes(e),[491,493].includes(e)?B(e,t):401===e?(window.__CHAT_GLOBAL__.socket&&window.__CHAT_GLOBAL__.socket.close(),window.__CHAT_GLOBAL__.resetAction&&x.store.dispatch(window.__CHAT_GLOBAL__.resetAction()),(0,a.removeItem)("mini-session"),(0,a.removeItem)("mini-sc_redirect"),"login"===o&&B(e,t)):B(e,t)}},W=e=>{var{uri:t,id:r,parentId:n}=e;if(void 0!==r&&parseInt(r)<=0&&!t.includes("message_shortcuts/group")||void 0!==n&&parseInt(n)<=0)throw new Error},K=(e,t,r)=>{throw e||(t.offlineError=!0),t};function Y(e){return q.apply(this,arguments)}function q(){return q=T((function*(e){var t=e.getReader(),r=new TextDecoder,n=[];function o(){return a.apply(this,arguments)}function a(){return(a=T((function*(){var{done:e,value:a}=yield t.read();if(e)return JSON.parse(n.join(""));var i=r.decode(a,{stream:!0});return n.push(i),o()}))).apply(this,arguments)}return o()})),q.apply(this,arguments)}var z,J,X=l(782),$=l(830),Q=l.n($),Z=l(292),ee=l.n(Z),te={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"},re={"94a2f272c378ddf18f5c88f4e951c709":"SHOW_HOME_PAGE",a5707a9d6695fc50e257b51aee9ec03b:"LOAD_RESOURCE",dd25761ed961c46f4a0725abf6325b3a:"RENDER_HOME_PAGE","65d0f06861e011436277b54e32e0e702":"SEND_MESSAGE_API",b2bad090fbb5b6eb526af0423326ba91:"SEND_MESSAGE_CONSUMING","00f7d4cb0b968ed35a91ae83c0346fe1":"FETCH_CONV_API",b7b04ad90caccf19961c3dcdf7063294:"FETCH_MESSAGE_API","7ce993bd22dee11001514ad2b8e760bf":"RENDER_MESSAGE_LIST_FROM_CONV"};z={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",LOGIN_IN_HTML:"4075993c600862e7c604e35cd692a297",LOGIN_IN_SERVICE:"2845ad2751849e3d43b26a805a25dbb4",PRE_FETCH_USER_INFO:"36a82dac2154de34fa4c6d7e3da73a19",NON_PRE_FETCH_USER_INFO:"a9de236c14047b42eec108bf7f22f2ac",TRANSLATION_IN_HTML:"b3105979b5cc6448de8272e177db5741",TRANSLATION_IN_SERVICE:"acfba493a8c2d11ad323bc09c2d06603",CONVERSATION_MOUNTED:"53ddb086a61674f59a9d84e1a02f04a5",CONVERSATION_LOADED:"800c5562450216bccfad6cd11847c160",RECEIVE_CHATBOT_RESPONSE:"a6f37d623af1c31b5ae3eb333fc571c8",REPORT_T3:"b16720c32b08d2c2b4b9cebb66205520",REPORT_T4:"20749fffb5583f720b3eacf5013c4398",REPORT_ERROR:"ce4cc92284f6ed31f8266c8e676744c5",MESSAGE_LATENCY:"4cb5dab311e98cba8ecb48c5e3df9e12",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf"},J={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",SHOW_HOME_PAGE:"94a2f272c378ddf18f5c88f4e951c709",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",LOAD_RESOURCE:"a5707a9d6695fc50e257b51aee9ec03b",RENDER_HOME_PAGE:"dd25761ed961c46f4a0725abf6325b3a",SEND_MESSAGE_API:"65d0f06861e011436277b54e32e0e702",SEND_MESSAGE_CONSUMING:"b2bad090fbb5b6eb526af0423326ba91",FETCH_CONV_API:"00f7d4cb0b968ed35a91ae83c0346fe1",FETCH_MESSAGE_API:"b7b04ad90caccf19961c3dcdf7063294",RENDER_MESSAGE_LIST_FROM_CONV:"7ce993bd22dee11001514ad2b8e760bf"};var ne={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE",START_SEND_MESSAGE:"START_SEND_MESSAGE",START_HANDLE_RESPONSE:"START_HANDLE_RESPONSE"},oe={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},ae={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error",FETCH_CONV_ERROR:"Fetch Conversation Error",FETCH_SERVE_TODAY_CONV_ERROR:"Fetch Serve Today Conversation Error"},ie={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error",FETCH_CONV_ERROR:"fetch_conversation_error",FETCH_SERVE_TODAY_CONV_ERROR:"fetch_serve_today_conversation_error"},{TYPE_ERROR:se,RANGE_ERROR:ce,SYNTAX_ERROR:_e,REFERENCE_ERROR:de}=ae;ie.TYPE_ERROR,ie.RANGE_ERROR,ie.SYNTAX_ERROR,ie.REFERENCE_ERROR;class ue{reportLoadResource(){we(ye.LOAD_RESOURCE,0)}reportRenderHomePage(e){we(ye.RENDER_HOME_PAGE,0,{isSidebar:e})}reportShowHomePage(e){if(window.__MINICHAT_ENTRY_CLICKED__){var{startTime:t,fromPage:r}=window.__MINICHAT_ENTRY_CLICKED__,n=Date.now()-t;window.__MINICHAT_ENTRY_CLICKED__=void 0,e?setTimeout((()=>{Ce(oe.APP,{duration:n,id:ye.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:r}})}),1e3):Ce(oe.APP,{duration:n,id:ye.SHOW_HOME_PAGE,extra:{isSidebar:e,fromPage:r}})}}reportWhetherPrefetchUserInfo(){window.__CHATEASY_LOCALE__?we(ye.PRE_FETCH_USER_INFO,0):we(ye.NON_PRE_FETCH_USER_INFO,0)}reportShowMinichat(e,t){var r=Date.now()-window.__START_MINICHAT__;Ce(oe.APP,{duration:r,id:ye.SHOW_WEBCHAT})}reportSendMessageApi(e){we(ye.SEND_MESSAGE_API,0,{value:e})}reportSendMessageConsuming(e){var t,r,n=null===(t=(performance.getEntriesByName("".concat(ne.START_SEND_MESSAGE,"_").concat(null===(r=JSON.parse(e).content)||void 0===r?void 0:r.uid),"mark")||[])[0])||void 0===t?void 0:t.startTime,o=Date.now()-Math.round(performance.timeOrigin+n);Ce(oe.APP,{duration:o,id:ye.SEND_MESSAGE_CONSUMING})}reportFetchConvApi({value:e,resource:t}){we(ye.FETCH_CONV_API,0,{value:e,resource:t})}reportFetchMessageApi(e){we(ye.FETCH_MESSAGE_API,0,{value:e})}reportRenderMessageListFromConv(e){window.__CLICK_CONV__&&(Ce(oe.APP,{duration:Date.now()-window.__CLICK_CONV__,id:ye.RENDER_MESSAGE_LIST_FROM_CONV,extra:{isFirstRender:e}}),window.__CLICK_CONV__=null)}reportVideoUpload(e,t={}){we(ye.VIDEO_UPLOAD,performance.now()-e,t)}reportVideoServiceDone(e,t={}){var r=performance.getEntriesByName("REPORT_UPLOAD_".concat(e),"mark")[0];if(r){performance.mark("SERVICE_DONE_".concat(e));var n=performance.getEntriesByName("SERVICE_DONE_".concat(e))[0].startTime-r.startTime;performance.clearMarks("REPORT_UPLOAD_".concat(e)),performance.clearMarks("SERVICE_DONE_".concat(e)),we(ye.SERVICE_DONE,n,t)}}reportMessageSocket(e){var t=+new Date-+e;we(ye.MESSAGE_SOCKET,t)}reportReadSocket(e){we(ye.READ_SOCKET,Date.now()-e)}reportLoginFailed(e){we(ye.LOGIN_FAILED,0,e)}reportSocketFailed(e={}){we(ye.SOCKET_FAILED,0,e)}reportSharedTabs(e){we(ye.SHARED_TABS,e)}reportLoginInHtml(){we(ye.LOGIN_IN_HTML,0)}reportLoginInService(){we(ye.LOGIN_IN_SERVICE,0)}reportFetchTranslationInHtml(){we(ye.TRANSLATION_IN_HTML,0)}reportFetchTranslationInService(){we(ye.TRANSLATION_IN_SERVICE,0)}reportT3OrT4(e){we(e,0)}reportChatbotApiError(){we(ye.REPORT_ERROR,0)}reportAsyncTask(e,t,r={}){we(e,t,r)}reportReceiveChatbotResponse(){we(ye.RECEIVE_CHATBOT_RESPONSE,0)}}var Ee,fe=()=>(window.chatReportManager||(window.chatReportManager=new ue),window.chatReportManager);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var he,ve,Oe,Re,be=e=>{Ee=e},me=!1,Se=location.host.includes("shopee.cn"),Ae=[],ge=window.requestIdleCallback,ye="live"===(0,a.getRuntimeServer)()?z:J,Te=()=>{try{var e=performance.getEntriesByName(ne.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(ne.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(ne.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(ne.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(ne.APP_RENDERING,"mark")[0].startTime;Ae.push({id:ye.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:ye.LOAD_STATIC,duration:Math.floor(t-e)},{id:ye.APP_PREPARE,duration:Math.floor(r-t)},{id:ye.LOGIN_API,duration:Math.floor(n-r)},{id:ye.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},Ne=()=>{try{var e=performance.getEntriesByName("ENTRY_CLICKED","mark")[0].startTime,t=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime,r=performance.getEntriesByName("CONVERSATION_LIST_MOUNTED","mark")[0].startTime;ye.CONVERSATION_MOUNTED&&e&&t&&Ae.push({id:ye.CONVERSATION_MOUNTED,duration:Math.floor(t-e)}),ye.CONVERSATION_LOADED&&t&&r&&Ae.push({id:ye.CONVERSATION_LOADED,duration:Math.floor(r-t)})}catch(e){}},Ce=(e,t)=>{try{var r=null,n=performance.getEntriesByName(ne.APP_RENDERING,"mark")[0].startTime;switch(e){case oe.WELCOME_PAGE:r=performance.getEntriesByName(ne.RENDER_WELCOME_PAGE,"mark")[0].startTime,Ae.push({id:ye.RENDER_WELCOME_PAGE,duration:Math.floor(r-n)});break;case oe.MESSAGE_LIST:r=performance.getEntriesByName(ne.RENDER_MESSAGE_LIST,"mark")[0].startTime,Ae.push({id:ye.RENDER_MESSAGE_LIST,duration:Math.floor(r-n)});break;case oe.CONVERSATION_LIST:r=performance.getEntriesByName(ne.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Ae.push({id:ye.RENDER_CONVERSATION_LIST,duration:Math.floor(r-n)})}Ae.push(t),ge(Le,{timeout:2e3})}catch(e){}},we=(e,t,r={})=>{try{Ae.push({id:e,duration:t,extra:r}),ge(Le,{timeout:2e3})}catch(e){}};function Le(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Ae.length;){var{id:t,duration:r,extra:n}=Ae.shift();t&&De(t,r,n),"live"!==(0,a.getRuntimeServer)()&&te[t]&&console.log("|-- 上报阶段: ",te[t],", 耗时为: ".concat(r),", 数据: ",n),re[t]&&console.log("|-- 新加上报点上报阶段: ",re[t],", 耗时为: ".concat(r,", 数据："),n)}Ae.length&&ge(Le,{timeout:2e3})}var Pe,Ie=()=>{if(!me){var e=(0,a.getRuntimeServer)(),t="live"===e,r=(0,a.getRuntimeRegion)(),n=(0,a.getRuntimeVersion)();he=new X.MdapSdk({app_name:"minichat",secret_key:t?"b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127":"2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280",environment:e,region:r,app_version:n,sample:1}),ve=new(Q())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages","webchat/api/v1.2/mini/messages",/[\\/]api[\\/]tsp[\\/].*/]}),Oe=new(ee())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),Re=new X.CustomPlugin({}),he.use(ve),he.use(Oe),he.use(Re),me=!0}};function De(e,t,r){me||Ie();var n={point_id:e,data:{userType:Ee,localOrCn:void 0!==Pe?Pe:Pe=Se&&"CN"!==(0,a.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:"pcmall"}};t&&(n=le(le({},n),{},{duration:t})),r&&(n.data=le(le({},n.data),r)),Re.sendData(n)}function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var He=(0,a.getRuntimeVersion)(),je=function(){var e=T((function*(){var e=null;try{e=a.LS.getItem("mini-session",!0)}catch(t){e=null}return e||(e=yield(0,a.getItem)("mini-session")),e}));return function(){return e.apply(this,arguments)}}(),ke={404:"Resource not found",452:"Tempory Error",500:"Internal server error",502:"Bad Gateway"},xe=90309999;function Fe(e){return Ve.apply(this,arguments)}function Ve(){return Ve=T((function*({url:e,server:t,subServer:r,version:n="v1.2",parent:o,parentId:i,resource:s,id:c,suffix:_,method:d="GET",credentials:u="include",extension:E,params:f={},payload:p,headers:l={},namespace:h="mini",fetcher:v}){var O=(e,t)=>[e,Object.entries(t).filter((([e,t])=>t||0===t)).map((([e,t])=>"".concat(e,"=").concat(encodeURIComponent(t)))).join("&")].filter(Boolean).join("?"),R=function(){var R=T((function*(R){R||(R=yield je());var b,m,S,{token:A,user:{type:g}={}}=R||{},y=0;if("subaccount"===g){var T=(()=>{if("sc"===_)return c;if("auth"===s)return i;if(f.shop_id)return f.shop_id;if(p)try{return JSON.parse(p).shop_id}catch(e){}})();S=yield I.getRegion(!0,T)}else S=(0,a.getRuntimeRegion)().toUpperCase();var N=A&&"include"===u||!t,L=N?{Authorization:"Bearer ".concat(A),"x-shop-region":S}:{};!t&&(t=(0,a.getApiServer)());var P=(()=>{var e=C().get("SPC_CDS_CHAT");if(!e){e=(0,w.v4)();var t=window.location.host.split(".");["seller","banhang"].includes(t[0])&&t.shift(),C().set("SPC_CDS_CHAT",e,{domain:".".concat(t.join("."))})}return e})();if(e){m=e;var D={};P&&(D.SPC_CDS_CHAT=P),m=O(m,D)}else{var M=["https:/",t,r,n,h,o,i,s,c,_].filter(Boolean).join("/"),G=E?"".concat(M,".").concat(E):M;((e,{session:t,shouldAddHeader:r,region:n,spcToken:o})=>{var a,i=null==t||null===(a=t.user)||void 0===a?void 0:a.uid;i&&(e._uid=i),He&&(e._v=He);var s=C().get("CTOKEN");s&&(e.csrf_token=s),o&&(e.SPC_CDS_CHAT=o),r&&(e["x-shop-region"]=n),e._api_source="pcmall"})(f,{session:R,shouldAddHeader:N,region:S,spcToken:P}),m=O(G,f)}try{W({uri:m,id:c,parentId:i});var H,k=Date.now(),x={method:d,credentials:u,headers:Ge(Ge({},L),l),body:p},F=v||j,q=yield F(m,x);if(y="number"==typeof q.status?q.status:q.__raw.status,v&&200===y&&p){var z=fe();null==z||z.reportSendMessageConsuming(p)}if(v?q.error===xe?B(y=499,{message:"need captcha",errcode:y,data:null}):y=q.__raw.status:y=q.status,[200,204].includes(y)&&"report_upload"===s&&p){var{vid:J}=JSON.parse(p);performance.mark("REPORT_UPLOAD_".concat(J))}if(V(y),200===y){var X=null;try{X=yield q.json()}catch(e){X=q}var $=X instanceof Array?{[s]:X}:X;return v&&p&&(b=JSON.parse(p).request_id,(0,a.setItem)(b,k)),$}if(204===y)return null;switch(y){case 404:case 452:case 500:case 502:H={message:ke[y]};break;default:if(v)try{var Q;H=yield Y(null==q||null===(Q=q.__raw)||void 0===Q?void 0:Q.body)}catch(e){H={message:"Server Error"}}else H=yield q.json()}U(y,H,{uri:m,resource:s})}catch(e){K(y,e)}}));return function(e){return R.apply(this,arguments)}}();return R(window.__WEBCHAT_SESSION__)})),Ve.apply(this,arguments)}var Be=null,Ue=e=>{e&&(Be=e)},We=null,Ke=({data:e,operation:t=a.TrackerOperation.CLICK,page:r,shopId:n,section:o="",type:i=""})=>{try{We||(We=window.BITrack?window.BITrack:window.trackingSDK);var s=(({data:e,operation:t,page:r,shopId:n,section:o,type:a})=>{var{shop_id:i="",role:s="",id:c=""}=Be||{};return{operation:t,page_section:o,target_type:a,page_type:r||"minichat_page",data:Object.assign({},{shopid:i||n,account_type:s||"shopee_user",account_id:c},e)}})({data:e,operation:t,page:r,shopId:n,section:o,type:i});We({data:{type:"v3",timestamp:Date.now(),info:s}})}catch(e){console.warn("Tracker error",e)}},Ye=new(l(187).EventEmitter),qe=(0,l(428).createBrowserHistory)({basename:"/chateasy"}),ze=()=>{var{location:e}=qe,t=e&&e.pathname;return t&&t.startsWith("/")?t.split("/")[1]:t},Je=l(383);function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qe=(e,t,r)=>new Je.schema.Entity(e,$e({},t),$e({},r)),Ze=Qe("users"),et=Qe("affiliate"),tt=Qe("messages"),rt=Qe("conversations"),nt=Qe("orders"),ot=Qe("products"),at=Qe("offers"),it=Qe("stickers"),st=Qe("shops"),ct=Qe("messageShortcuts"),_t=Qe("rateCards"),dt=Qe("agentConversations"),ut=Qe("contacts",{},{idAttribute:"account_id"}),Et=Qe("vouchers"),ft={users:Ze,affiliate:et,messages:tt,conversations:rt,orders:nt,offers:at,products:ot,stickers:it,shops:st,messageShortcuts:ct,rateCards:_t,agentConversations:dt,contacts:ut,vouchers:Et};const pt=(e,t)=>{var r=ft[e]||Qe(e);return t instanceof Array?(0,Je.normalize)(t,[r]):(0,Je.normalize)(t,r)};var lt,ht=l(455),vt=l.n(ht),Ot=l(944),Rt=[];lt=[202,215];var bt=(e,t)=>{var r=lt.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,a.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return M()(o).then(function(){var e=T((function*(e){return yield e.json()}));return function(t){return e.apply(this,arguments)}}())};function*mt({locale:e}){var t,r="live"===(0,a.getRuntimeServer)()||"live-test"===(0,a.getRuntimeServer)(),n=new(vt())({name:"webchat"}),o=yield n.create({locale:e,env:r?"live":"non-live",region:(0,a.getRuntimeRegion)(),translation:{resources:Rt,collections:lt}});if(t=o.translation,(0,a.checkEmptyObject)(t)){var i=[];lt.concat(Rt).forEach((t=>{i.push(bt(t,e))})),(yield(0,Ot.all)(i)).forEach((e=>{Object.assign(t,e)}))}return t}})(),h})(),e.exports=n(r(58518),r(29494),r(36808),r(67429),r(94301),r(44900),r(59065),r(67677),r(58397),r(47190),r(82677),r(98282),r(34857))},96961:function(e,t,r){"use strict";e.exports=r(27830)}}]);