(self.miniJsonp=self.miniJsonp||[]).push([[4997],{55698:function(e,t,n){var r,o,c,u,i;e.exports=(r=n(82677),o=n(20573),c=n(29494),u=n(53402),i=n(96961),function(){"use strict";var e={383:function(e){e.exports=r},975:function(e){e.exports=o},511:function(e){e.exports=u},644:function(e){e.exports=i},855:function(e){e.exports=c}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],u=!0,i=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);u=!0);}catch(e){i=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(i)throw o}}return c}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(n){return function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(a),n.d(a,{activeListTabSelector:function(){return p},allConversationIdsSelector:function(){return U},allTotalConversationsCountMapSelector:function(){return xe},allTotalConversationsCountSelector:function(){return We},bannerInfoSelector:function(){return K},bizIdSelector:function(){return Y},bizIdsSelector:function(){return H},changeChatWithTypeSelector:function(){return G},chatWithTypeListSelector:function(){return V},chatWithTypeSelector:function(){return W},conversationBeenDeletedSelector:function(){return Me},conversationDirectionSelector:function(){return $},conversationHttpStatusSelector:function(){return Q},conversationIdsSelector:function(){return D},conversationLastMessageSelector:function(){return vt},conversationsSelector:function(){return X},curConvsMessageSelector:function(){return Ct},curMessagesRelatedSelector:function(){return dt},currentAffiliateSelector:function(){return me},currentBuyerIdSelector:function(){return ae},currentBuyerSelector:function(){return _e},currentBuyerShopIdSelector:function(){return Te},currentBuyerShopSelector:function(){return Ce},currentConversationBuyerIdSelectors:function(){return fe},currentConversationCanReadSelector:function(){return q},currentConversationHasLoadingSelector:function(){return Je},currentConversationIdSelector:function(){return F},currentConversationMaxOptionHideTimeSelectors:function(){return Se},currentConversationSelector:function(){return ie},currentConversationShopIdSelectors:function(){return de},currentConversationShopRegionSelectors:function(){return le},currentConversationShopSelectors:function(){return se},currentConversationStatusSelectors:function(){return ve},currentConversationToNameSelector:function(){return Pe},currentConversationTranslationAccessSelector:function(){return Ie},currentPendingOffersCountSelector:function(){return Ue},currentSellerAccountIdSelector:function(){return Be},currentShopIdSelector:function(){return he},defaultCount:function(){return ke},degradeConversationIdsSelector:function(){return re},feedbackSelector:function(){return Et},filterSelector:function(){return oe},filteredConversationsSelector:function(){return ce},getConversation:function(){return pe},getConversationPendingOffersCountSelector:function(){return Ne},getConversationShopId:function(){return ye},getConversationShopRegion:function(){return ze},getConversations:function(){return ge},getConversationsSelector:function(){return E},getConvsMessagesRelatedSelector:function(){return ft},getMessageSelector:function(){return lt},hasPinFlagSelector:function(){return h},inlocationSelector:function(){return B},isChatAvailiableSelector:function(){return J},isDriverSelector:function(){return x},isNavigateToUnreadMessageSelector:function(){return je},keywordSelector:function(){return be},listsHashSelector:function(){return Ee},mediaListSelector:function(){return It},messagesRelatedMapSelector:function(){return ut},missedReadNoticeCountSelector:function(){return z},navigateToUnreadMessageIdSelector:function(){return De},noticesCountSelector:function(){return Pt},pinnedConversationIdsSelector:function(){return L},readRequestIdsSelector:function(){return N},reconnectFlagSelector:function(){return Mt},redirectionInfoSelector:function(){return Ke},replyToMessageSelector:function(){return Ot},resultsSelector:function(){return Re},reverseMessagesSelector:function(){return ht},searchConversationHttpStatusSelector:function(){return Oe},selectVideoInfoByKey:function(){return at},selectVideoInfoKeyByVid:function(){return st},serveTodayAllConversationIdsSelector:function(){return I},serveTodayAutoRepliedConversationIdsSelector:function(){return R},serveTodayAutoRepliedConversationsSelector:function(){return P},serveTodayConversationHttpStatusSelector:function(){return _},serveTodayConversationsSelector:function(){return w},serveTodayFolderStatusSelector:function(){return y},serveTodayManuallyRepliedConversationIdsSelector:function(){return O},serveTodayManuallyRepliedConversationsSelector:function(){return A},serveTodayOnlyConversationsSelector:function(){return j},serveTodayPinnedConversationIdsSelector:function(){return C},serveTodayUnrepliedConversationIdsSelector:function(){return b},serveTodayUnrepliedConversationsSelector:function(){return M},serveTodayWaitingUpdatedRecordsSelector:function(){return g},shopAccessSelector:function(){return we},showFrozenTipSelector:function(){return Ve},showLoadingMessagesMapSelector:function(){return He},singleConversationIdsSelector:function(){return T},singleConversationMarkInfoSelector:function(){return Ge},singleConversationStateSelector:function(){return m},sortedConversationsSelector:function(){return ue},totalConversationsCountSelector:function(){return Fe},twoTabsAllConversationIdsSelector:function(){return qe},updateTimeNowSelector:function(){return k}});var c=n(383),u=n(975),i=n(855),s=n(511),l=n(644);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.serveToday)||{}},p=(0,u.createSelector)(S,(function(e){return e.activeListTab})),y=(0,u.createSelector)(S,(function(e){return e.folderStatus})),g=(0,u.createSelector)(S,(function(e){return e.waitingUpdatedRecords||{}})),h=(0,u.createSelector)(S,(function(e){return e.hasPinFlag||{}})),_=(0,u.createSelector)(S,(function(e){return e.status||""})),m=function(e){return(0,u.createSelector)(S,(function(t){return t[e]||{}}))},T=function(e){return(0,u.createSelector)(m(e),(function(e){return e.conversationIds||[]}))},C=(0,u.createSelector)(S,(function(e){return(e[i.ServeTodayTab.PINNED]||{}).conversationIds||[]})),b=(0,u.createSelector)(S,(function(e){return(e[i.ServeTodayTab.UNREPLIED]||{}).conversationIds||[]})),R=(0,u.createSelector)(S,(function(e){return(e[i.ServeTodayTab.AUTOREPLY]||{}).conversationIds||[]})),O=(0,u.createSelector)(S,(function(e){return(e[i.ServeTodayTab.MANUALREPLY]||{}).conversationIds||[]})),I=(0,u.createSelector)(C,b,R,O,(function(e,t,n,r){return[].concat(o(e),o(t),o(n),o(r))})),E=function(e){return(0,u.createSelector)(s.conversationEntitiesSelector,T(e),(function(e,t){return((0,c.denormalize)(t,[l.conversationSchema],{conversations:e})||[]).filter(Boolean)}))},M=(0,u.createSelector)(E(i.ServeTodayTab.UNREPLIED),(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),e})),P=(0,u.createSelector)(E(i.ServeTodayTab.AUTOREPLY),(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))})),A=(0,u.createSelector)(E(i.ServeTodayTab.MANUALREPLY),(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))})),w=(0,u.createSelector)(y,E(i.ServeTodayTab.PINNED),M,P,A,(function(e,t,n,r,c){var u,a=[],s=(d(u={},i.ServeTodayTab.PINNED,t),d(u,i.ServeTodayTab.UNREPLIED,n),d(u,i.ServeTodayTab.AUTOREPLY,r),d(u,i.ServeTodayTab.MANUALREPLY,c),u),l=t.map((function(e){return e.id}))||[];return i.ServeTodayFolders.forEach((function(t){var n=s[t];t!==i.ServeTodayTab.PINNED&&(n=n.filter((function(e){return!l.includes(e.id)})),t===i.ServeTodayTab.AUTOREPLY&&(n=n.map((function(e){return v(v({},e),{},{isAutoReply:!0})})))),n.length&&(a=e[t]?a.concat([{key:t,id:"".concat(t,"Tab")}].concat(o(n))):a.concat([{key:t,id:"".concat(t,"Tab")}]))})),a})),j=(0,u.createSelector)(w,(function(e){return e.filter((function(e){return!e.id.includes("Tab")}))})),D=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationIds)||[]},L=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.pinnedConversationIds)||[]},U=(0,u.createSelector)(D,L,(function(e,t){var n=e.filter((function(e){return!t.includes(e)}));return t.concat(n)})),N=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.readRequestIds)||[]},z=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.missedReadNoticeCount)||0},B=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.inlocation)||!1},k=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.updateTimeNow)||"0"},F=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.currentConversationId)||null},W=function(e){var t;return null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.chatWithType},x=(0,u.createSelector)(W,(function(e){return e===i.ChatWithTypeEnum.Driver})),Y=(0,u.createSelector)(W,s.sellerDriverWhitelistSelector,s.amsFeatureToggleSelector,(function(e,t,n){return!t&&e===i.ChatWithTypeEnum.Driver||!n&&i.ChatWithTypeEnum.Affiliate?i.ChatWithTypeMap.buyer:i.ChatWithTypeMap[e]})),G=(0,u.createSelector)(W,Y,(function(e,t){return i.ChatWithTypeMap[e]!==t})),V=(0,u.createSelector)(s.sellerDriverWhitelistSelector,s.amsFeatureToggleSelector,(function(e,t){var n=[i.ChatWithTypeEnum.Buyer];return e&&n.push(i.ChatWithTypeEnum.Driver),t&&n.push(i.ChatWithTypeEnum.Affiliate),n})),H=(0,u.createSelector)(V,(function(e){return e.map((function(e){return i.ChatWithTypeMap[e]}))})),J=function(e){var t;return null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.isChatAvailiable},K=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.topBannerInfo)||{}},q=function(e){var t;return(0,s.judgeUndefined)({defaultValue:!0,value:null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.currentConversationCanRead})},Q=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.status)||""},$=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.direction)||""},X=(0,u.createSelector)(s.conversationEntitiesSelector,U,(function(e,t){return((0,c.denormalize)(t,[l.conversationSchema],{conversations:e})||[]).filter(Boolean)})),Z=(0,u.createSelector)(X,F,(function(e,t){return e.filter((function(e){var n=e.id,r=e.unread_count;return e&&(r>0||n===t)}))})),ee=(0,u.createSelector)(X,(function(e){return e.filter((function(e){return e.isPinned}))})),te=(0,u.createSelector)(X,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),ne=(0,u.createSelector)(X,F,(function(e,t){return e.filter((function(e){var n=e.unreplied,r=e.id;return void 0===n||n||!n&&r===t}))})),re=(0,u.createSelector)(X,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),oe=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.filter)||"All"},ce=(0,u.createSelector)(oe,X,Z,ee,te,ne,(function(e,t,n,r,o,c){return{All:t,Unread:n,Pinned:r,Closed:o,Unreplied:c}[e]})),ue=(0,u.createSelector)(ce,L,s.waitingTimeFilterSelector,oe,(function(e,t,n,r){var o=e.filter((function(e){return!t.includes(e.id)})),c=e.filter((function(e){return t.includes(e.id)}));return o.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})),c.concat(o).filter((function(e){return void 0===e.faking}))})),ie=(0,u.createSelector)(X,w,F,s.isSubAccountSelector,B,s.userEntitiesSelector,s.conversationEntitiesSelector,s.showChatServingFeatureSelector,(function(e,t,n,r,u,i,a,s){var d=(s?[].concat(o(e),o(t)):e).find((function(e){return e.id===n}))||{};if(u&&!d.id&&(d=(0,c.denormalize)(n,l.conversationSchema,{conversations:a})||{}),!r&&d.lack){var f=d.to_id,v=(0,c.denormalize)(f,l.userSchema,{users:i})||{},S={to_shop_id:v.shop_id,to_status:v.status,to_name:v.name||"-",to_avatar:v.avatar};return Object.assign(d,S)}return d})),ae=(0,u.createSelector)(ie,(function(e){return(e||{}).to_id||null})),se=(0,u.createSelector)(ie,s.shopsEntitiesSelector,(function(e,t){return(0,c.denormalize)(e.shop_id,l.shopSchema,{shops:t})||{}})),le=(0,u.createSelector)(se,(function(e){return(null==e?void 0:e.country)||"SG"})),de=(0,u.createSelector)(ie,(function(e){return e.shop_id})),fe=(0,u.createSelector)(ie,(function(e){return e.to_id})),ve=(0,u.createSelector)(ie,(function(e){return e.status})),Se=(0,u.createSelector)(ie,(function(e){return e.max_general_option_hide_time})),pe=function(e){return(0,u.createSelector)(s.conversationEntitiesSelector,(function(t){return(0,c.denormalize)(e,l.conversationSchema,{conversations:t})||{}}))},ye=function(e){return(0,u.createSelector)(pe(e),(function(e){return e.shop_id}))},ge=function(e){return(0,u.createSelector)(X,w,s.showChatServingFeatureSelector,(function(t,n,r){var c=r?[].concat(o(t),o(n)):t;return e.map((function(e){return c.find((function(t){return t.id===e}))})).filter(Boolean)}))},he=(0,u.createSelector)(ie,(function(e){return(e||{}).shop_id||null})),_e=(0,u.createSelector)(s.userEntitiesSelector,ie,(function(e,t){return t?(0,c.denormalize)(t.to_id,l.userSchema,{users:e}):{}})),me=(0,u.createSelector)(s.affiliateEntitiesSelector,ie,(function(e,t){return t?(0,c.denormalize)(t.to_id,l.affiliateSchema,{affiliate:e}):{}})),Te=(0,u.createSelector)(ie,(function(e){return(e||{}).to_shop_id||null})),Ce=(0,u.createSelector)(Te,s.shopsEntitiesSelector,(function(e,t){return(0,c.denormalize)(e,l.shopSchema,{shops:t})||{}})),be=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.keyword)||""},Re=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.results)||[]},Oe=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.searchStatus)||""},Ie=(0,u.createSelector)(ie,(function(e){return e.translationAccess})),Ee=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.listsHash)||{}},Me=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationBeenDeleted)||!1},Pe=(0,u.createSelector)(ie,(function(e){return(e||{}).to_name})),Ae={hasSCAccess:!0,hasEditOrderAccess:!0,hasViewOrderAccess:!0,hasViewProductAccess:!0,hasEditVoucherAccess:!0,hasViewVoucherAccess:!0,hasViewRrOrderAccess:!0,hasOrderDetailAccess:!0},we=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.access)||Ae},je=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.isNavigateToUnreadMessage)||!1},De=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.navigateToUnreadMessageId)||""},Le=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.pendingOffersCount)||{}},Ue=(0,u.createSelector)(ie,Le,(function(e,t){var n=e.shop_id,r=e.to_id;return t["".concat(n,"_").concat(r)]||0})),Ne=function(e){return(0,u.createSelector)(pe(e),Le,(function(e,t){var n=e.shop_id,r=e.to_id;return t["".concat(n,"_").concat(r)]||0}))},ze=function(e){return(0,u.createSelector)(ye(e),s.shopsEntitiesSelector,(function(e,t){var n=(0,c.denormalize)(e,l.shopSchema,{shops:t})||{};return(null==n?void 0:n.country)||"SG"}))},Be=(0,u.createSelector)(s.isSubAccountSelector,s.currentUserIdSelector,se,(function(e,t,n){return e?n.user_id:t})),ke={unrepliedCount:0,duesoonCount:0,overdueCount:0,pinnedCount:0,unreadCount:0,serveTodayUnrepliedCount:0,serveTodayDuesoonCount:0,serveTodayOverdueCount:0,serveTodayPinnedCount:0,serveTodayBotRepliedCount:0,serveTodayManualRepliedCount:0},Fe=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.totalConversationsCount)||ke},We=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.allTotalConversationsCount)||{}},xe=(0,u.createSelector)(V,We,(function(e,t){return e.reduce((function(e,n){var r,o,c=(null===(r=t["with_".concat(n,"_attribute")])||void 0===r?void 0:r.attributes)||{},u=(null===(o=t["with_".concat(n,"_attribute")])||void 0===o?void 0:o.serving_today_attributions)||{},i={unrepliedCount:c.total_unreplied_conv_count,duesoonCount:c.total_due_soon_conv_count,overdueCount:c.total_over_due_conv_count,pinnedCount:c.total_pinned_conv_count,unreadCount:c.total_unread_conv_count,serveTodayUnrepliedCount:u.total_unreplied_conv_count,serveTodayDuesoonCount:u.total_due_soon_conv_count,serveTodayOverdueCount:u.total_over_due_conv_count,serveTodayPinnedCount:u.total_pinned_conv_count,serveTodayBotRepliedCount:u.total_bot_replied_count,serveTodayManualRepliedCount:u.total_manual_replied_count,serveTodayUnreadCount:u.total_unread_conv_count};return e[n]=i||ke,e}),{})})),Ye=function(e){var t;return(null==e||null===(t=e.conversationReducer)||void 0===t?void 0:t.conversationMark)||{}},Ge=function(e){return(0,u.createSelector)(Ye,(function(t){return t[e]}))},Ve=(0,u.createSelector)(s.shopTranslationSettingsSelector,s.isSubAccountSelector,he,s.currentUserShopIdSelector,(function(e,t,n,r){return"frozen"===(e[t?n:r]||{}).userStatus})),He=function(e){var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.showLoadingMessagesMap},Je=(0,u.createSelector)(F,He,(function(e,t){var n,o,c=t&&t[e],u=Object.entries(c||{})||[],i=u.some((function(e){var t=r(e,2),n=(t[0],t[1]);return null==n?void 0:n.showLoading}));return u.forEach((function(e,t){var c=r(e,2),u=(c[0],c[1]),i=u.startTime;(0===t||i<n)&&(n=i,o=u.isSend)})),{hasLoading:i,isSend:o,earliestStartTime:n}})),Ke=function(e){var t;return null===(t=e.conversationReducer)||void 0===t?void 0:t.redirectionInfo},qe=(0,u.createSelector)(s.showChatServingFeatureSelector,U,I,(function(e,t,n){return e?[].concat(o(t),o(n)):t}));function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe,Ze=i.MessageTypes.MSG_TYPE_OFFER,et=i.MessageTypes.MSG_TYPE_ORDER,tt=i.MessageTypes.MSG_TYPE_PRODUCT,nt=i.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,rt=i.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,ot=i.MessageTypes.MSG_TYPE_RATE_CARD,ct=[et,tt],ut=(0,u.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),it=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},at=function(e){return(0,u.createSelector)(it,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},st=function(e){return(0,u.createSelector)(it,(function(t){return Object.keys(t).find((function(n){return t[n].vid===e}))}))},lt=function(e){return(0,u.createSelector)(s.messageEntitiesSelector,(function(t){return(0,c.denormalize)(e,l.messageSchema,{messages:t})}))},dt=(0,u.createSelector)(F,ut,(function(e,t){return t[e]||{all:[]}})),ft=function(e){return(0,u.createSelector)(ut,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},vt=(Xe=function(e){return(0,u.createSelector)(ft(e),pe(e),s.messageEntitiesSelector,(function(e,t,n){return(0,s.getConversationLastMessage)(e,t,n)}))},function(){var e=Array.prototype.slice.call(arguments);return Xe.memoize=Xe.memoize||{},e in Xe.memoize?Xe.memoize[e]:Xe.memoize[e]=Xe.apply(this,e)}),St=(0,u.createSelector)(dt,(function(e){var t=o(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),pt=(0,u.createSelector)(dt,(function(e){return e.sending||[]})),yt=(0,u.createSelector)(dt,(function(e){return e.failed||[]})),gt=(0,u.createSelector)(s.messageEntitiesSelector,St,(function(e,t){return((0,c.denormalize)(t,[l.messageSchema],{messages:e})||[]).filter(Boolean)})),ht=(0,u.createSelector)(gt,(function(e){return e.reverse()})),_t=(0,u.createSelector)(ie,ht,(function(e,t){return e?t.filter(Boolean).reduce((function(e,t){var n=t.type,r=t.source_type,o=t.source_content,c=t.content;if(!r||n===Ze||[-1,0].includes(o["".concat(r,"_id")]))return e;if(ct.includes(n)&&o){var u="".concat(n,"_id");if(c[u]===o[u])return e}var i=e.lastSourceMessage,a=e.sourceList;if(!a.length)return{sourceList:a.concat(t),lastSourceMessage:t};if(r===tt){var s=null==o?void 0:o.product_id,l=i.source_content&&i.source_content.product_id;if(!s||l===s)return e}else if(r===et){var d=null==o?void 0:o.order_id,f=i.source_content&&i.source_content.order_id;if(!d||[-1,0,f].includes(d))return e}return{sourceList:a.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),mt=(0,u.createSelector)(_t,(function(e){return e.map((function(e){return e.id}))})),Tt=(0,u.createSelector)(s.entitiesSelector,gt,(function(e,t){var n=t.filter((function(e){return e&&e.type===Ze})).map((function(e){return e.content.offer_id}));return(0,c.denormalize)(n,[l.offerSchema],e)})),Ct=(0,u.createSelector)(ht,mt,pt,yt,ie,s.rateCardEntitiesSelector,Tt,(function(e,t,n,r,o,c,u){return o?e.filter((function(e){if(!e)return!1;var t=e.content,n=e.type;return!(![nt,rt].includes(n)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=n.includes(e.id)?i.MessageSendStatus.SENDING:r.includes(e.id)?i.MessageSendStatus.FAILED:e.send_status?i.MessageSendStatus.SUCCEED:null,a=t.includes(e.id),s=Object.assign({},e,{send_status:o,hasMessageSource:a}),l=s,d=l.type,f=l.content,v=void 0===f?{}:f,S=l.message_option;switch(d){case Ze:var p=u.find((function(e){return e&&e.id===v.offer_id}));s=Object.assign({},s,{textContent:p});break;case ot:var y=c[v.card_id];y&&(s=Object.assign({},s,{textContent:y}))}return(0,i.hasTargetMessageOption)(S,i.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(s=$e($e({},s),{},{send_status:i.MessageSendStatus.FAILED,errorCode:i.MessageErrorCode.BLACKLIST})),s})):[]})),bt=(0,u.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),Rt=(0,u.createSelector)(F,bt,(function(e,t){return t[e]||""})),Ot=(0,u.createSelector)(Rt,s.messageEntitiesSelector,(function(e,t){return(0,c.denormalize)(e,l.messageSchema,{messages:t})})),It=(0,u.createSelector)(F,(function(e){var t;return(null===(t=e.mediaPreviewerReducer)||void 0===t?void 0:t.mediaMap)||{}}),(function(e,t){return t[e]||[]})),Et=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.feedback)||void 0},Mt=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.reconnectFlag)||!1},Pt=function(e){var t;return(null==e||null===(t=e.socketReducer)||void 0===t?void 0:t.noticesCount)||0}}(),a}())},66633:function(e,t,n){"use strict";e.exports=n(55698)}}]);